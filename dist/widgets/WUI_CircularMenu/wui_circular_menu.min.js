var WUI_CircularMenu=new function(){"use strict";var a=[],b=0,c={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},d={x:null,y:null,rx:64,ry:48,item_width:32,item_height:32,window:null,element:null},e=function(b){var c,d;for(d=0;a.length>d;d+=1)c=a[d],b.body.removeChild(c);a=[]},f=function(a,b,c){var d=function(a){a.preventDefault(),c(),e(b)};return d},g=function(a,d){var f=function(g){g.preventDefault();var h=(new Date).getTime();500>=h-b||g.target.classList.contains(c.item)||(e(d),a.removeEventListener("click",f),a.removeEventListener("mousedown",f))};return f},h=function(d,h,i,j,k,l){e(j);var m,n,o,p=-(Math.PI/2),q=h.length,r=2*Math.PI/q;for(o=0;q>o;o+=1)n=h[o],m=document.createElement("div"),m.classList.add(c.item),m.style.width=d.item_width+"px",m.style.height=d.item_height+"px",m.style.backgroundSize=d.item_width-4+"px "+(d.item_height-4)+"px",m.style.left=k+d.rx*Math.cos(p)+"px",m.style.top=l+d.ry*Math.sin(p)+"px",m.classList.add(n.icon),n.tooltip&&(m.title=n.tooltip),j.body.appendChild(m),i.getComputedStyle(m).width,a.push(m),n.on_click&&m.addEventListener("click",f(i,j,n.on_click)),m.classList.add(c.show),p+=r;var s=g(i,j);i.addEventListener("click",s),b=(new Date).getTime(),i.addEventListener("mousedown",s)};this.create=function(a,b){var c,e,f,g,i,j={},k=document,l=window;for(c in d)d.hasOwnProperty(c)&&(j[c]=d[c]);if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&void 0!==d[c]&&(j[c]=a[c]);g=j.element,null!==g?(i=g.getBoundingClientRect(),k=g.ownerDocument,l=k.defaultView||k.parentWindow,e=i.left+(i.width-j.item_width)/2,f=i.top+(i.height-j.item_height)/2,h(j,b,l,k,e,f)):null!==e&&null!==f&&(null!==j.window&&(l=j.window,k=l.document),e=j.x-j.item_width/2,f=j.y-j.item_height/2,h(j,b,l,k,e,f))}};
