var WUI_DropDown=new function(){"use strict";var a={},b={dropdown:"wui-dropdown",item:"wui-dropdown-item",content:"wui-dropdown-content",selected:"wui-dropdown-selected",open:"wui-dropdown-open",on:"wui-dropdown-on"},c={width:"auto",height:24,ms_before_hiding:2e3,vertical:!1,vspacing:0,selected_id:0,on_item_selected:null},d=function(a){window.WUI_Reporting&&"undefined"!=typeof console&&console.log(a)},e=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},f=function(a,c){var d,e=a.createElement("div"),f=null,g="";for(d=0;d<c.content_array.length;d+=1)g=c.content_array[d],f=a.createElement("div"),c.opts.vertical||f.classList.add("wui-dropdown-horizontal"),f.classList.add(b.item),f.innerHTML=g,f.dataset.index=d,e.appendChild(f),f.addEventListener("click",i,!1),g===c.content_array[c.selected_id]&&f.classList.add(b.selected);e.addEventListener("mouseover",j,!1),e.classList.add(b.content),e.dataset.linkedto=c.element.id,a.body.appendChild(e),c.floating_content=e},g=function(a,c,d){c.classList.remove(b.on),d.floating_content&&d.floating_content.parentElement===a.body&&a.body.removeChild(d.floating_content),d.floating_content=null,d.close_timeout=null},h=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=null,f=null;d.classList.contains(b.dropdown)&&(e=a[d.id],f=e.floating_content,f?f.classList.contains(b.open)&&g(c.target.ownerDocument,d,e):j(c))},i=function(c){c.preventDefault(),c.stopPropagation();var d,e,f=c.target,h=null,i=null;if(f.classList.contains(b.item)){for(h=f.parentElement,d=a[h.dataset.linkedto],i=h.getElementsByTagName("div"),e=0;e<i.length;e+=1)i[e].classList.remove(b.selected);f.classList.add(b.selected),d.selected_id=parseInt(f.dataset.index,10),d.target_element.lastElementChild.innerHTML=f.textContent,d.element!==d.target_element&&(d.element.lastElementChild.innerHTML=f.textContent),void 0!==d.opts.on_item_selected&&d.opts.on_item_selected(f.dataset.index),g(f.ownerDocument,d.target_element,d)}},j=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,g=null,h=null,i=null,j=d.ownerDocument,l=j.defaultView||j.parentWindow;if(d.classList.contains(b.dropdown))g=a[d.id],null===g.floating_content&&(d.classList.add(b.on),f(j,g),i=g.floating_content,h=e(d),i.style.top=h.top-i.offsetHeight-g.opts.vspacing+"px",i.style.left=h.left+"px",i.classList.add(b.open),g.target_element=d);else if(d.classList.contains(b.content))g=a[d.dataset.linkedto];else{if(!d.classList.contains(b.item))return;g=a[d.parentElement.dataset.linkedto]}l.clearTimeout(g.close_timeout),d.addEventListener("mouseleave",k,!1)},k=function(c){c.preventDefault();var d=c.target,e=null,f=d.ownerDocument,h=f.defaultView||f.parentWindow;e=d.classList.contains(b.content)?a[d.dataset.linkedto]:d.classList.contains(b.item)?a[d.parentElement.dataset.linkedto]:a[d.id],e.close_timeout=h.setTimeout(g,e.opts.ms_before_hiding,f,e.target_element,e),d.removeEventListener("mouseleave",k,!1)},l=function(){d("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(e,f,g){var i,k,m={};if("string"==typeof e)i=document.getElementById(e);else{if("object"!=typeof e)return void l();if("string"!=typeof e.innerHTML)return void l();i=e,e=i.id}if(void 0!==a[e])return void d("WUI_DropDown id '"+e+"' already created, aborting.");for(k in c)c.hasOwnProperty(k)&&(m[k]=c[k]);if(void 0!==f)for(k in f)f.hasOwnProperty(k)&&void 0!==c[k]&&(m[k]=f[k]);i.classList.add(b.dropdown),i.style.width=m.width,i.style.height=m.height;var n=document.createElement("div");n.classList.add("wui-dropdown-icon"),i.appendChild(n);var o=document.createElement("div");o.classList.add("wui-dropdown-text"),0!==g.length&&(o.innerHTML=g[m.selected_id]),i.appendChild(o),i.addEventListener("click",h,!1),i.addEventListener("mouseover",j,!1);var p={element:i,floating_content:null,selected_id:m.selected_id,content_array:g,opts:m,button_item:o,hover_count:0,target_element:null,close_timeout:null};return a[e]=p,e},this.destroy=function(b){var c,e=a[b];return void 0===e?void d("Element id '"+b+"' is not a WUI_DropDown, destroying aborted."):(c=e.element,g(document,c,e),c.parentElement.removeChild(c),void delete a[b])}};