var WUI_DropDown=new function(){var a={},b={dropdown:"wui-dropdown",item:"wui-dropdown-item",content:"wui-dropdown-content",selected:"wui-dropdown-selected",open:"wui-dropdown-open"},c={width:"auto",height:24,ms_before_hiding:2e3,vertical:!1,vspacing:0,selected_id:0,on_item_selected:null,use_event_listener:!0},d=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}},e=function(a){a.floating_content.classList.remove(b.open),a.element.classList.remove("wui-dropdown-on"),a.close_timeout=null},f=function(c){c.preventDefault&&c.preventDefault();var d=c.target,f=null,g=null;d.classList.contains(b.dropdown)&&(f=a[d.id],g=f.floating_content,f.floating_content.classList.contains(b.open)&&e(f))},g=function(c){c.preventDefault&&c.preventDefault();var d,e=c.target,f=a[e.id],g=null,h=null;if(e.classList.contains(b.item)){for(g=e.parentElement,f=a[g.dataset.linkedto],h=g.getElementsByTagName("div"),d=0;h.length>d;d+=1)h[d].classList.remove(b.selected);e.classList.add(b.selected),f.button_item.innerHTML=e.textContent,void 0!==f.opts.on_item_selected&&f.opts.on_item_selected(e.dataset.index)}},h=function(c){c.preventDefault&&c.preventDefault();var e=c.target,f=null,g=null,h=null;if(e.classList.contains(b.dropdown))f=a[e.id],f.element.classList.add("wui-dropdown-on"),h=f.floating_content,g=d(e),h.style.top=g.top-h.offsetHeight-f.opts.vspacing+"px",h.style.left=g.left+"px",h.classList.add(b.open);else if(e.classList.contains(b.content))f=a[e.dataset.linkedto];else{if(!e.classList.contains(b.item))return;f=a[e.parentElement.dataset.linkedto]}window.clearTimeout(f.close_timeout),e.addEventListener("mouseleave",i,!1)},i=function(c){c.preventDefault&&c.preventDefault();var d=c.target,f=null;f=d.classList.contains(b.content)?a[d.dataset.linkedto]:d.classList.contains(b.item)?a[d.parentElement.dataset.linkedto]:a[d.id],f.close_timeout=window.setTimeout(e,f.opts.ms_before_hiding,f),d.removeEventListener("mouseleave",i,!1)};this.triggerEvent=function(a,b){var c=a.type;return void 0!==b&&(c=b),"mouseover"===c?h(a):"click"===c&&g(a),!1},this.create=function(d,e,i){var j,k=document.getElementById(d),l=null,m="",n=[],o={},p=0;if(void 0!==a[d])return void console.log("WUI_DropDown id '"+d+"' already created, aborting.");for(j in c)c.hasOwnProperty(j)&&(o[j]=c[j]);if(void 0!==e)for(j in e)e.hasOwnProperty(j)&&void 0!==c[j]&&(o[j]=e[j]);k.classList.add(b.dropdown),k.style.width=o.width,k.style.height=o.height;var q=document.createElement("div");q.classList.add("wui-dropdown-icon"),k.appendChild(q);var r=document.createElement("div");r.classList.add("wui-dropdown-text"),0!==i.length&&(r.innerHTML=i[o.selected_id]),k.appendChild(r);var s=document.createElement("div");for(o.use_event_listener&&(k.addEventListener("mouseover",h,!1),k.addEventListener("click",f,!1),s.addEventListener("mouseover",h,!1)),p=0;i.length>p;p+=1)m=i[p],l=document.createElement("div"),o.vertical||l.classList.add("wui-dropdown-horizontal"),l.classList.add(b.item),l.innerHTML=m,l.dataset.index=p,s.appendChild(l),n.push(l),o.use_event_listener&&(l.addEventListener("click",g,!1),l.addEventListener("mouseover",h,!1)),m===i[o.selected_id]&&l.classList.add(b.selected);s.classList.add(b.content),s.dataset.linkedto=d,document.body.appendChild(s);var t={element:k,floating_content:s,items:n,opts:o,button_item:r,hover_count:0,close_timeout:null};a[d]=t}};
