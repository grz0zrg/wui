var WUI_Form=new function(){"use strict";var a={},b={form:"wui-form",main_group:"wui-form-main-group",sub_group:"wui-form-sub-group",sub_group_div:"wui-form-sub-group-div",tn:"wui-form-tn",sm:"wui-form-sm",md:"wui-form-md",xl:"wui-form-xl",align_right:"wui-form-align-right",inline:"wui-form-inline"},c={width:"auto",on_change:null},d={wui_item:"wui_form_item_",std_item:"wui_form_std_item_"},e={checkbox:"input",text:"input",color:"input",date:"input","datetime-local":"input",email:"input",file:"input",hidden:"input",image:"input",month:"input",number:"input",radio:"input",range:"input",reset:"input",search:"input",submit:"input",tel:"input",time:"input",url:"input",week:"input",password:"input"},f=["button","datalist","input","label","legend","meter","select","textarea","checkbox","text","color","date","datetime-local","email","file","hidden","image","month","number","radio","range","reset","search","submit","tel","time","url","week","password"],g=["WUI_RangeSlider","WUI_Input","WUI_DropDown"],h=function(a){window.WUI_Reporting&&"undefined"!=typeof console&&console.log(a)},i=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.setAttribute(c,a[c])},j=function(b,c,d){return function(e){e.target?b.name?"checkbox"===b.type?(a[b.wid].sitems[b.name].value=e.target.checked,b.value=e.target.checked):(a[b.wid].sitems[b.name].value=e.target.value,b.value=e.target.value):b.value="checkbox"===b.type?e.target.checked:e.target.value:(b.name&&(a[b.wid].sitems[b.name].value=e),b.value=e),void 0!==c&&c(b.value,e,b),void 0!==d&&d(b.value,e,b)}},k=function(c,h,l,m,n,o,p){var q,r,s,t,u,v,w,x,y,z,A,B,C,D=0,E=0,F=o;for(void 0===h?(q=document.createElement("div"),s=document.createElement("legend")):(q=document.createElement("fieldset"),s=document.createElement("legend"),s.innerHTML=h),void 0!==l&&i(l,q),q.appendChild(s),D=0;D<n.length;D+=1)if(r=n[D],r.type)if(f.indexOf(r.type)!==-1){if(u=null,e[r.type]?(v=document.createElement(e[r.type]),v.type=r.type,B=v):(v=document.createElement(r.type),B=v),r.wrap&&(u=document.createElement("div"),u.appendChild(v),B=u),v.id=d.std_item+F+"_"+c,r.group&&(v.name=r.group),r.name&&(a[c].items[r.name]={elem:v},a[c].sitems[r.name]={value:0}),"textarea"===r.type||"text"===r.type?v.addEventListener("input",j({wid:c,name:r.name,type:r.type},p.on_change)):"button"===r.type?v.addEventListener("click",j({wid:c,name:r.name,type:r.type},p.on_change)):v.addEventListener("change",j({wid:c,name:r.name,type:r.type},p.on_change)),r.content&&(v.innerHTML=r.content),r.label&&(w=document.createElement("label"),w.setAttribute("for",v.id),w.innerHTML=r.label,null===u?q.appendChild(w):B.insertBefore(w,v),"input"===r.type&&(w.appendChild(v),B=w)),r.attr&&i(r.attr,v),("select"===r.type||"datalist"===r.type)&&("datalist"===r.type&&(z=document.createElement("input"),z.setAttribute("list",v.id),r.id&&z.setAttribute("id",r.id),r.name&&z.setAttribute("name",r.name),B.appendChild(z)),r.options))for(y=v,E=0;E<r.options.length;E+=1)C=r.options[E],"object"==typeof C&&C.group&&(y=document.createElement("optgroup"),y.setAttribute("label",C.group),C.group_attr&&i(C.group_attr,y),v.appendChild(y)),x=document.createElement("option"),"string"==typeof C?(x.innerHTML=C,y.appendChild(x)):"object"==typeof C&&C.name&&(x.innerHTML=C.name,y.appendChild(x),C.label&&x.setAttribute("label",C.label),"booleans"==typeof C.disabled&&x.setAttribute("disabled",C.disabled),"booleans"==typeof C.selected&&x.setAttribute("selected",C.selected),C.value&&x.setAttribute("value",C.value),C.attr&&i(C.attr,x));r.value&&(v.value=r.value),q.appendChild(B),F+=1}else g.indexOf(r.type)!==-1?window[r.type]&&(t=document.createElement("div"),t.id=d.wui_item+F,r.name&&(a[c].items[r.name]={elem:t},a[c].sitems[r.name]={value:0}),r.opts&&(r.opts.on_change&&(r.opts.on_change=j({wid:c,name:r.name},r.opts.on_change,p.on_change)),r.opts.on_item_selected&&(r.opts.on_item_selected=j({wid:c,name:r.name},r.opts.on_item_selected,p.on_change))),window[r.type].create(t,r.opts,r.items),q.appendChild(t),F+=1):"fieldset"===r.type&&r.items&&(A={style:""},r.class?(A.class=r.class,A.class+=" "+b.sub_group):A.class=b.sub_group,r.style&&(A.style+=r.style),r.width&&(A.style+="width: "+r.width),r.height&&(A.style+="height: "+r.height),"right"===r.content_align&&(A.class+=" "+b.align_right),r.inline&&(A.class+=" "+b.inline),r.items_size?"tn"===r.items_size?A.class+=" "+b.tn:"sm"===r.items_size?A.class+=" "+b.sm:"md"===r.items_size?A.class+=" "+b.md:"xl"===r.items_size&&(A.class+=" "+b.xl):A.class+=" "+b.sm,void 0===r.name&&(A.class+=" "+b.sub_group_div),F=k(c,r.name,A,q,r.items,F,p));return m.appendChild(q),F},l=function(){h("WUI_Form 'create' failed, first argument not an id nor a DOM element.")};this.create=function(d,e,f){var g,i,j,m=0,n={};if("string"==typeof d)g=document.getElementById(d);else{if("object"!=typeof d)return void l();if("string"!=typeof d.innerHTML)return void l();g=d,d=g.id}if(void 0!==a[d])return void h("WUI_Form id '"+d+"' already created, aborting.");for(j in c)c.hasOwnProperty(j)&&(n[j]=c[j]);if(void 0!==e)for(j in e)e.hasOwnProperty(j)&&void 0!==c[j]&&(n[j]=e[j]);a[d]={element:g,total_items:m,items:{},sitems:{},opts:n};for(j in f)f.hasOwnProperty(j)&&(i=f[j],m+=k(d,j,{class:b.main_group},g,i,m,n));return a[d].total_items=m,g.style.width=n.width,g.classList.add(b.form),d},this.destroy=function(b){var c,e,f,i,j=a[b];if(void 0===j)return void h("Element id '"+b+"' is not a WUI_Form, destroying aborted.");for(c=j.element,f=0;f<j.total_items;f+=1)if(e=document.getElementById(d.wui_item+f+"_"+c.id))for(i=0;i<g.length;i+=1)window[g[i]].destroy(e);delete a[b]},this.getParameters=function(b){var c,d=a[b],e={};if(void 0===d)return h("Element id '"+b+"' is not a WUI_Form, getParameters aborted."),null;for(c in d.sitems)d.sitems.hasOwnProperty(c)&&(e[c]=d.sitems[c]);return e},this.setParameters=function(b,c,d){var e,f=a[b];if(void 0===f)return void h("Element id '"+b+"' is not a WUI_Form, setParameters aborted.");if(c)for(e in c)c.hasOwnProperty(e)&&f.items[e]&&(f.sitems[e]=c[e],d&&(f.items[e].elem.value=c[e].value,f.items[e].elem.checked=c[e].checked))}};