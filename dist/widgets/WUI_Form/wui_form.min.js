var WUI_Form=new function(){"use strict";var a={},b={form:"wui-form",main_group:"wui-form-main-group",sub_group:"wui-form-sub-group",sub_group_div:"wui-form-sub-group-div",tn:"wui-form-tn",sm:"wui-form-sm",md:"wui-form-md",xl:"wui-form-xl",align_right:"wui-form-align-right",inline:"wui-form-inline"},c={width:"auto",on_change:null},d={wui_item:"wui_form_item_",std_item:"wui_form_std_item_"},e={checkbox:"input",text:"input",color:"input",date:"input","datetime-local":"input",email:"input",file:"input",hidden:"input",image:"input",month:"input",number:"input",radio:"input",range:"input",reset:"input",search:"input",submit:"input",tel:"input",time:"input",url:"input",week:"input",password:"input"},f=["button","datalist","input","label","legend","meter","select","textarea","checkbox","text","color","date","datetime-local","email","file","hidden","image","month","number","radio","range","reset","search","submit","tel","time","url","week","password"],g=["WUI_RangeSlider","WUI_Input","WUI_DropDown"],h=function(a){window.WUI_Reporting&&"undefined"!=typeof console&&console.log(a)},i=function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.setAttribute(c,a[c])},j=function(a,b){return function(c){b(c,a)}},k=function(a,c,h,l,m,n,o){var p,q,r,s,t,u,v,w,x,y,z,A,B,C=0,D=0,E=n;for(void 0===c?(p=document.createElement("div"),r=document.createElement("legend")):(p=document.createElement("fieldset"),r=document.createElement("legend"),r.innerHTML=c),void 0!==h&&i(h,p),p.appendChild(r),C=0;C<m.length;C+=1)if(q=m[C],q.type)if(f.indexOf(q.type)!==-1){if(t=null,e[q.type]?(u=document.createElement(e[q.type]),u.type=q.type,A=u):(u=document.createElement(q.type),A=u),q.wrap&&(t=document.createElement("div"),t.appendChild(u),A=t),u.id=d.std_item+E+"_"+a,o.on_change&&u.addEventListener("change",j({},o.on_change)),q.group&&(u.name=q.group),q.name&&(u.dataset.eName=q.name),q.label&&(v=document.createElement("label"),v.setAttribute("for",u.id),v.innerHTML=q.label,null===t?p.appendChild(v):A.insertBefore(v,u),"input"===q.type&&(v.appendChild(u),A=v)),q.attr&&i(q.attr,u),("select"===q.type||"datalist"===q.type)&&("datalist"===q.type&&(y=document.createElement("input"),y.setAttribute("list",u.id),q.id&&y.setAttribute("id",q.id),q.name&&y.setAttribute("name",q.name),A.appendChild(y)),q.options))for(x=u,D=0;D<q.options.length;D+=1)B=q.options[D],"object"==typeof B&&B.group&&(x=document.createElement("optgroup"),x.setAttribute("label",B.group),B.group_attr&&i(B.group_attr,x),u.appendChild(x)),w=document.createElement("option"),"string"==typeof B?(w.innerHTML=B,x.appendChild(w)):"object"==typeof B&&B.name&&(w.innerHTML=B.name,x.appendChild(w),B.label&&w.setAttribute("label",B.label),"booleans"==typeof B.disabled&&w.setAttribute("disabled",B.disabled),"booleans"==typeof B.selected&&w.setAttribute("selected",B.selected),B.value&&w.setAttribute("value",B.value),B.attr&&i(B.attr,w));q.value&&(u.value=q.value),p.appendChild(A),E+=1}else g.indexOf(q.type)!==-1?window[q.type]&&(s=document.createElement("div"),s.id=d.wui_item+E,window[q.type].create(s,q.opts,q.items),p.appendChild(s),E+=1):"fieldset"===q.type&&q.items&&(z={style:""},q.class?(z.class=q.class,z.class+=" "+b.sub_group):z.class=b.sub_group,q.style&&(z.style+=q.style),q.width&&(z.style+="width: "+q.width),q.height&&(z.style+="height: "+q.height),"right"===q.content_align&&(z.class+=" "+b.align_right),q.inline&&(z.class+=" "+b.inline),q.items_size?"tn"===q.items_size?z.class+=" "+b.tn:"sm"===q.items_size?z.class+=" "+b.sm:"md"===q.items_size?z.class+=" "+b.md:"xl"===q.items_size&&(z.class+=" "+b.xl):z.class+=" "+b.sm,void 0===q.name&&(z.class+=" "+b.sub_group_div),E+=k(a,q.name,z,p,q.items,E,o));return l.appendChild(p),E},l=function(){h("WUI_Form 'create' failed, first argument not an id nor a DOM element.")};this.create=function(d,e,f){var g,i,j,m=0,n={};if("string"==typeof d)g=document.getElementById(d);else{if("object"!=typeof d)return void l();if("string"!=typeof d.innerHTML)return void l();g=d,d=g.id}if(void 0!==a[d])return void h("WUI_Form id '"+d+"' already created, aborting.");for(j in c)c.hasOwnProperty(j)&&(n[j]=c[j]);if(void 0!==e)for(j in e)e.hasOwnProperty(j)&&void 0!==c[j]&&(n[j]=e[j]);for(j in f)f.hasOwnProperty(j)&&(i=f[j],m=k(d,j,{class:b.main_group},g,i,0,n));return g.style.width=n.width,g.classList.add(b.form),a[d]={element:g,total_items:m,opts:n},d},this.destroy=function(b){var c,e,f,i,j=a[b];if(void 0===j)return void h("Element id '"+b+"' is not a WUI_Form, destroying aborted.");for(c=j.element,f=0;f<j.total_items;f+=1)if(e=document.getElementById(d.wui_item+f+"_"+c.id))for(i=0;i<g.length;i+=1)window[g[i]].destroy(e);delete a[b]}};