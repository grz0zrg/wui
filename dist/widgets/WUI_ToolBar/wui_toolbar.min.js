var WUI_ToolBar=new function(){"use strict";var a={},b={g:"wui-toolbar-minimize-icon",h:"wui-toolbar-maximize-icon",button:"wui-toolbar-button",i:"wui-toolbar-minimize-group",j:"wui-toolbar-minimize-group-vertical",toggle:"wui-toolbar-toggle",k:"wui-toolbar-toggle-on",item:"wui-toolbar-item",group:"wui-toolbar-group",l:"wui-toolbar-group-vertical",m:"wui-toolbar",o:"wui-toolbar-dropdown-content",p:"wui-toolbar-dropdown-item",q:"wui-toolbar-dropdown-open"},c={s:null,t:null,u:32,v:32,A:32,B:32,C:!1,vertical:!1},d=function(b){var c=a[b];return void 0===c?("undefined"!=typeof console&&console.log('_getWidget failed, the element id "'+b+'" is not a WUI_ToolBar.'),null):c},e=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},f=function(c,d){return void 0!==d?a[d]:c.classList.contains(b.m)?a[c.id]:c.classList.contains(b.g)||c.classList.contains(b.h)||c.classList.contains(b.l)||c.classList.contains(b.group)?a[c.parentElement.id]:a[c.parentElement.parentElement.id]},g=function(a,b,c){if(void 0!==a.D&&null!==a.D){var d={id:a.id,type:b};void 0!==c&&(d.state=c),a.D(d)}},h=function(a,c,d){var e,f=a.createElement("div");if(void 0!==c.F)for(e=0;e<c.F.length;e+=1){var g=c.F[e],h=a.createElement("div");c.vertical||h.classList.add("wui-toolbar-dropdown-horizontal"),h.classList.add(b.p),h.innerHTML=g.title,h.dataset.index=e,f.appendChild(h)}return f.addEventListener("click",j,!1),f.style.width=d.G+"px",f.classList.add(b.o),f.dataset.H=d.I.id,f.dataset.J=c.id,a.body.appendChild(f),f},i=function(a,c,d){var e,h,i,j=null,k=!1,l=0;j=f(a,c),h=j.I,a.parentElement&&a.parentElement.parentElement&&(h=a.parentElement.parentElement);var m=j.K[parseInt(a.dataset.L,10)];if("1"===m.I.dataset.M?(m.I.dataset.M=0,a.dataset.M=0,m.I.title=m.N,a.title=m.N,void 0!==m.icon&&(m.I.classList.add(m.icon),m.I.classList.remove(m.O),a.classList.add(m.icon),a.classList.remove(m.O))):(m.I.dataset.M=1,a.dataset.M=1,void 0!==m.P&&(m.I.title=m.P,a.title=m.P),void 0!==m.O&&(m.I.classList.add(m.O),m.I.classList.remove(m.icon),a.classList.add(m.O),a.classList.remove(m.icon)),k=!0),"none"!==m.R&&(a.classList.contains(b.k)?(m.I.classList.remove(b.k),a.classList.remove(b.k)):(m.I.classList.add(b.k),a.classList.add(b.k))),e=a.dataset.S,void 0!==e)for(i=h.getElementsByClassName(b.item),l=0;l<i.length;l+=1){var n=i[l],o=j.K[parseInt(n.dataset.L,10)];if(e===n.dataset.S&&n.dataset.L!==a.dataset.L){if("0"===n.dataset.M)continue;n.dataset.M="0",o.I.dataset.M="0",n.classList.remove(b.k),o.I.classList.remove(b.k),void 0!==m.O&&(n.classList.remove(o.O),o.I.classList.remove(o.O)),void 0!==m.icon&&(n.classList.add(o.icon),o.I.classList.add(o.icon)),(d||void 0===d)&&g(o,"toggle",!1)}}d!==!0&&void 0!==d||g(m,"toggle",k)},j=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=d.ownerDocument,f=d.parentElement,g=a[f.dataset.H],h=parseInt(f.dataset.J,10),i=g.K[h],j=parseInt(d.dataset.index,10),l=i.F[j],m=e.getElementById(f.dataset.H),n=m.getElementsByClassName(b.item),o=n[h];void 0!==l.D&&(l.D(),o.classList.remove(b.k),i.I.classList.remove(b.k),k(i,o))},k=function(a,c){var d,e,f=c.ownerDocument,g=f.body.getElementsByClassName(b.o);for(e=0;e<g.length;e+=1)d=g[e],d.removeEventListener("click",j,!1),d.parentElement.removeChild(d);a.I.classList.remove(b.k),c.classList.remove(b.k)},l=function(a,b){var c=function(){var d=b.ownerDocument,e=d.defaultView||d.parentWindow;k(a,b),e.removeEventListener("click",c)};return c},m=function(a){a.preventDefault(),a.stopPropagation();var c=a.target;if(c.classList.contains(b.i)||c.classList.contains(b.j))return void n(c);if(c.classList.contains(b.toggle))return void i(c);if(!(c.classList.contains(b.m)||c.classList.contains(b.group)||c.classList.contains(b.l))){var d=null,j=null,m=null,o=null,p=c.ownerDocument,q=p.defaultView||p.parentWindow;if(o=f(c),d=o.K[c.dataset.L],"dropdown"===d.type){if(c.classList.contains(b.k))return void k(d,c);j=h(p,d,o);var r=d.I;c.classList.add(b.k),r.classList.add(b.k),m=e(c),"tb_item"===d.G&&(j.style.width=c.offsetWidth+"px"),"s"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+"px"):"sw"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"nw"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"se"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):"ne"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):(j.style.top=m.top-j.offsetHeight+"px",j.style.left=m.left+"px"),j.classList.add(b.q),a.stopPropagation&&a.stopPropagation(),q.addEventListener("click",l(d,c),!1)}else g(d,"click")}},n=function(a){var c=a.nextSibling;a.classList.contains(b.g)?(a.classList.add(b.h),a.classList.remove(b.g),a.title="Maximize group",c.style.display="none"):(a.classList.add(b.g),a.classList.remove(b.h),a.title="Minimize group",c.style.display="")},o=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(d,e,f){var g,h,j=null,k=null,l=null,n=null,p={};if("string"==typeof d)g=document.getElementById(d);else{if("object"!=typeof d)return void o();if("string"!=typeof d.innerHTML)return void o();g=d,d=g.id}if(void 0!==a[d])return void console.log("WUI_Toolbar id '"+d+"' already created, aborting.");for(h in c)c.hasOwnProperty(h)&&(p[h]=c[h]);if(void 0!==e)for(h in e)e.hasOwnProperty(h)&&void 0!==c[h]&&(p[h]=e[h]);a[d]={I:g,K:[],T:p},g.classList.add(b.m);var q=b.group,r=b.item,s="wui-toolbar-spacer",t=b.i;p.vertical?(g.classList.add("wui-toolbar-vertical"),q=b.l,r+=" wui-toolbar-item-vertical",s="wui-toolbar-spacer-vertical",t=b.j,g.style.maxWidth=p.u+4+"px",null===p.s&&(p.s=3),null===p.t&&(p.t=8)):(g.style.maxHeight=p.v+4+"px",null===p.s&&(p.s=3),null===p.t&&(p.t=0)),t=b.button+" "+b.g+" "+t,g.addEventListener("click",m,!1);var u;for(l in f)if(f.hasOwnProperty(l)){null!==n&&(k=document.createElement("div"),k.className=s,g.appendChild(k)),p.C&&(k=document.createElement("div"),k.className=t,k.title="Minimize group",g.appendChild(k)),j=f[l];var v=document.createElement("div");for(v.className=q,p.vertical?v.style.maxWidth=p.u+"px":v.style.maxHeight=p.v+"px",u=0;u<j.length;u+=1){var w,x=j[u],y=document.createElement("div"),z=a[d].K.length,A={I:y,D:x.D,icon:x.icon,F:[],N:"",type:x.type,G:x.U,orientation:x.orientation,id:z};if(y.className=r,y.style.minWidth=p.u+"px",y.style.minHeight=p.v+"px",y.style.marginLeft=p.s+"px",y.style.marginRight=p.s+"px",y.style.marginTop=p.t+"px",y.style.marginBottom=p.t+"px",y.style.backgroundSize=p.A-4+"px "+(p.B-4)+"px",v.appendChild(y),a[d].K.push(A),y.dataset.L=z,A.N=x.N,void 0!==x.N&&(y.title=x.N),void 0!==x.text&&(y.innerHTML=x.text,y.style.lineHeight=p.v+"px",y.classList.add("wui-toolbar-text"),void 0!==x.icon&&(y.style.paddingLeft=p.A+2+"px",y.style.backgroundPosition="left center")),void 0!==x.icon&&y.classList.add(x.icon),"toggle"===x.type)y.classList.add(b.toggle),A.O=x.O,A.P=x.P,A.R=x.R,void 0!==x.S&&(y.dataset.S=x.S),x.V&&(y.dataset.M="1");else if("dropdown"===x.type){if(y.classList.add(b.button),void 0!==x.F)for(w=0;w<x.F.length;w+=1){var B=x.F[w];A.F.push({title:B.title,D:B.D})}}else y.classList.add(b.button)}g.appendChild(v),n=j}var C=g.getElementsByClassName(b.item);for(u=0;u<C.length;u+=1){var D=C[u];"1"===D.dataset.M&&(D.dataset.M="0",i(D,d,!0))}return d},this.W=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.I.getElementsByClassName(h.T.vertical?b.l:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.i)||g.classList.contains(b.j))&&(g.style.display="none"),f.style.display="none"}},this.X=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.I.getElementsByClassName(h.T.vertical?b.l:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.i)||g.classList.contains(b.j))&&(g.style.display=""),e[c].style.display=""}},this.toggle=function(a,b,c){var e=d(a);e&&i(e.K[b].I,a,c)},this.Y=function(a,b){var c=d(a);if(c)return c.K[b].I},this.Z=function(b){var c,d,e,f,g,h,i,j=a[b];if(void 0===j)return void console.log("Element id '"+b+"' is not a WUI_ToolBar, destroying aborted.");for(c=j.toolbar,d=j.K,c.parentElement.removeChild(c),i=0;i<d.length;i+=1)e=d[i],"dropdown"===e.type&&(f=e.F,f.length>0&&(g=f[0],h=g.I,h.parentElement.removeChild(h)));delete a[b]}};