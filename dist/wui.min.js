var WUI_Dialog=new function(){"use strict";var a={},b=null,c=null,d=null,e=0,f=0,g=0,h=0,i=null,j=[],k={dialog:"wui-dialog",content:"wui-dialog-content",btn:"wui-dialog-btn",btn_close:"wui-dialog-close",detach:"wui-dialog-detach",minimized:"wui-dialog-minimized",minimize:"wui-dialog-minimize",maximize:"wui-dialog-maximize",header:"wui-dialog-header",open:"wui-dialog-open",closed:"wui-dialog-closed",draggable:"wui-dialog-draggable",transition:"wui-dialog-transition",dim_transition:"wui-dialog-dim-transition",modal:"wui-dialog-modal",status_bar:"wui-dialog-status-bar"},l={title:"",width:"80%",height:"40%",open:!0,closable:!0,minimizable:!1,draggable:!1,resizable:!1,detachable:!1,min_width:"title",min_height:32,status_bar:!1,status_bar_content:"",keep_align_when_resized:!1,halign:"left",valign:"top",top:0,left:0,modal:!1,minimized:!1,on_close:null,on_detach:null,on_resize:null};Element.prototype._addEventListener||(Element.prototype._addEventListener=Element.prototype.addEventListener,Element.prototype.addEventListener=function(a,b,c){this._addEventListener(a,b,c),this.eventListenerList||(this.eventListenerList={}),this.eventListenerList[a]||(this.eventListenerList[a]=[]),this.eventListenerList[a].push(b)},Element.prototype._removeEventListener=Element.prototype.removeEventListener,Element.prototype.removeEventListener=function(a,b,c){if(this.eventListenerList){var d,e=this.eventListenerList[a];if(e)for(d=0;e.length>d;d+=1)if(e[d]===b){e.splice(d,1);break}}this._removeEventListener(a,b,c)});var m=function(a){for(var b=0;j.length>b;b+=1)if(j[b]===a.detachable_ref){j.splice(b,1);break}},n=function(b,c,d,e){var f,g,h,i,l=a[b.id];if(l){if(c&&l.detachable_ref&&(l.detachable_ref.closed||l.detachable_ref.close(),m(l)),e&&l.modal_element)for(document.body.removeChild(l.modal_element),g=0;j.length>g;g+=1)for(i=j[g],f=i.document.body.getElementsByClassName(k.modal),h=0;f.length>h;h+=1)i.document.body.removeChild(f[h]);l.dialog.classList.contains(k.open)&&(b.classList.add(k.closed),b.classList.remove(k.open),d&&null!==l.opts.on_close&&l.opts.on_close())}},o=function(b){var c=0,d=null,e=a[b.id];if(!e.opts.modal){for(var f in a)a.hasOwnProperty(f)&&(d=a[f].dialog,isNaN(d.style.zIndex)||(c=parseInt(d.style.zIndex,10),c>100&&(d.style.zIndex=100)));b.style.zIndex=101}},p=function(a){var b=document.createElement("div");return b.className="wui-dialog-modal",b.addEventListener("click",function(b){b.preventDefault(),n(a,!0,!0,!0)}),b.style.zIndex=16777270,b},q=function(b){var c=a[b.id],d=c.opts,e=b.parentElement.offsetWidth,f=b.parentElement.offsetHeight,g=b.offsetWidth,h=b.offsetHeight;b.style.left="center"===d.halign?Math.round((e-g)/2+d.left)+"px":"right"===d.halign?e-g+d.left+"px":d.left+"px",b.style.top="center"===d.valign?Math.round((f-h)/2+d.top)+"px":"bottom"===d.valign?f-h+d.top+"px":d.top+"px"},r=function(b,c){var d=a[c.id],e=d.resize_handler;b.classList.toggle(k.minimize),b.classList.toggle(k.maximize),c.classList.toggle(k.minimized),c.classList.contains(k.minimized)?(c.style.borderStyle="solid",c.style.borderColor="#808080",c.style.borderWidth="1px"):(c.style.borderStyle="",c.style.borderColor="",c.style.borderWidth=""),e&&e.classList.toggle(k.open),d.status_bar&&d.status_bar.classList.toggle(k.open)},s=function(b){null===i&&(i=setTimeout(function(){i=null;var c,d,e,f,g,h,j,l=document;if(b)for(l=b.document,c=l.getElementsByClassName(k.content),j=0;c.length>j;j+=1)e=c[j],f=e.parentElement,d=a[f.id],g=f.getElementsByClassName(k.status_bar),e.style.height=g.length>0?b.innerHeight-32+"px":b.innerHeight+"px",h=e.getBoundingClientRect(),d.opts.on_resize&&d.opts.on_resize(h.width,h.height);else for(c=l.getElementsByClassName(k.content),j=0;c.length>j;j+=1)e=c[j],f=e.parentElement,g=f.getElementsByClassName(k.status_bar),e.style.height=g.length>0?f.offsetHeight-64+"px":f.offsetHeight-32+"px",q(f),h=e.getBoundingClientRect(),d=a[f.id],d.opts.on_resize&&d.opts.on_resize(h.width,h.height)},125))},t=function(a,b){var c,d;do{if(1==a.nodeType&&a.eventListenerList)for(c in a.eventListenerList)if("length"!==c&&a.eventListenerList.hasOwnProperty(c))for(d=0;a.eventListenerList[c].length>d;d+=1)b.addEventListener(c,a.eventListenerList[c][d],!1);a.hasChildNodes()&&t(a.firstChild,b.firstChild),a=a.nextSibling,b=b.nextSibling}while(a&&b)},u=function(b){var c,d,e,f,g,h,i,l=a[b.id],m=b.firstElementChild.firstElementChild.firstElementChild,o=m.textContent||m.innerText||"",p=l.detachable_ref,q=b.getBoundingClientRect();for(b.classList.contains(k.minimized)?(c=parseInt(b.style.width,10),d=parseInt(b.style.height,10)-32):(c=q.width,d=q.height-32),e=void 0!==window.screenLeft?window.screenLeft:screen.left,f=void 0!==window.screenTop?window.screenTop:screen.top,n(b,!0,!1,!1),p=window.open("",o,["toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes","width="+c,"height="+d,"top="+(q.top+f+32),"left="+(q.left+e)].join(",")),l.detachable_ref=p,h="",g=document.head.getElementsByTagName("link"),i=0;g.length>i;i+=1)"text/css"===g[i].type&&"stylesheet"===g[i].rel&&(h+=g[i].outerHTML);for(g=document.head.getElementsByTagName("style"),i=0;g.length>i;i+=1)h+=g[i].outerHTML;p.document.open(),p.document.write("<html><head>"+("<title>"+o+"</title>")+h+"</head>"+('<body id="'+b.id+'" class="wui-dialog-detach-window-body" onload="parent.opener.WUI_Dialog.childWindowLoaded(document.body.id)">')+"</body></html>"),p.document.close(),p.document.body.appendChild(b.children[1].cloneNode(!0));var r=b.getElementsByClassName(k.status_bar);if(r.length>0){var t=r[0].cloneNode(!0);t.classList.add(k.open),p.document.body.appendChild(t)}p.addEventListener("resize",function(){s(p)},!1),p.addEventListener("beforeunload",function(){n(b,!0,!0,!0)},!1),j.push(p)},v=function(a){a.preventDefault();var b=a.target,c=null;b.classList.contains(k.btn_close)?(c=b.parentElement.parentElement,n(c,!1,!0,!0)):b.classList.contains(k.maximize)||b.classList.contains(k.minimize)?(c=b.parentElement.parentElement,r(b,c)):b.classList.contains(k.detach)&&(c=b.parentElement.parentElement,u(c))},w=function(a){if(b){a.preventDefault();var c,g,h,i=a.clientX,j=a.clientY,k=a.changedTouches,l=null;if(k)for(c=0;k.length>c;c+=1)if(l=k[c],l.identifier===d){i=k[c].clientX,j=k[c].clientY;break}g=i-e,h=j-f,b.style.left=g+"px",b.style.top=h+"px"}},x=function(a){if(b){var c,e=a.changedTouches,f=null,g=b.ownerDocument,h=g.defaultView||g.parentWindow;if(e){for(c=0;e.length>c;c+=1)if(f=e[c],f.identifier===d){b=null,g.body.style.cursor="default",h.removeEventListener("touchmove",w,!1),h.removeEventListener("touchend",x,!1);break}}else b=null,g.body.style.cursor="default",h.removeEventListener("mousemove",w,!1),h.removeEventListener("mouseup",x,!1)}},y=function(a){var c,g,h,i=a.clientX,j=a.clientY,l=0,m=0,n=a.changedTouches;if(a.preventDefault(),null===b)if(n)d=n[0].identifier,i=n[0].clientX,j=n[0].clientY;else if(0!==a.button)return;h=a.target.parentElement,!h.classList.contains(k.maximize)&&h.classList.contains(k.draggable)&&(b=h,c=b.ownerDocument,g=c.defaultView||c.parentWindow,o(b),c.body.style.cursor="move",l=parseInt(b.style.left,10),m=parseInt(b.style.top,10),e=i-l,f=j-m,g.addEventListener("mousemove",w,!1),g.addEventListener("touchmove",w,!1),g.addEventListener("mouseup",x,!1),g.addEventListener("touchend",x,!1))},z=function(a){a.preventDefault(),a.stopPropagation();var b=a.target.parentElement,e=b.offsetLeft,f=b.offsetTop,i=a.changedTouches,j=b.ownerDocument,l=j.defaultView||j.parentWindow;i&&(d=i[0].identifier),g=e,h=f,b.classList.remove(k.dim_transition),l.addEventListener("mousemove",A,!1),l.addEventListener("touchmove",A,!1),l.addEventListener("mouseup",B,!1),l.addEventListener("touchend",B,!1),c=b},A=function(b){b.preventDefault();var e,f,i=b.clientX,j=b.clientY,l=b.changedTouches,m=null,n=a[c.id],o=null,p=null,r=0,s=0,t=0;if(l)for(s=0;l.length>s;s+=1)if(m=l[s],m.identifier===d){i=l[s].clientX,j=l[s].clientY;break}for(e=i-g,f=j-h,p=c.firstElementChild.firstElementChild.firstElementChild,r=p.offsetWidth+148,"title"===n.opts.min_width&&r>e?e=r:n.opts.min_width>e&&(e=n.opts.min_width),n.opts.status_bar&&(t=32),n.opts.min_height+t>f&&(f=n.opts.min_height+t),c.style.width=e+"px",c.classList.contains(k.minimized)||(c.style.height=f+"px"),o=c.getElementsByClassName(k.content),s=0;o.length>s;s+=1){var u,v=o[s],w=a[v.parentElement.id];v.style.height=c.offsetHeight-32-t+"px",u=v.getBoundingClientRect(),w.opts.on_resize&&w.opts.on_resize(u.width,u.height),n.opts.keep_align_when_resized&&q(c)}},B=function(a){var b=c.ownerDocument,d=b.defaultView||b.parentWindow;a.preventDefault(),c.classList.add(k.dim_transition),d.removeEventListener("mousemove",A,!1),d.removeEventListener("touchmove",A,!1),d.removeEventListener("mouseup",B,!1),d.removeEventListener("touchend",B,!1),c=null},C=function(){for(var b in a)a.hasOwnProperty(b)&&n(a[b].dialog,!0,!1,!0)};this.create=function(b,c){var d,e={};if(void 0!==a[b])return void console.log("WUI_Dialog id '"+b+"' already created, aborting.");for(d in l)l.hasOwnProperty(d)&&(e[d]=l[d]);if(void 0!==c)for(d in c)c.hasOwnProperty(d)&&void 0!==l[d]&&(e[d]=c[d]);var f=document.getElementById(b),g=document.createElement("div"),h=null,i=null,j=null,m=null,n=null,o=null,p=null;if(null===f)return void("undefined"!=typeof console&&console.log('WUI dialog create, unknow element with id "'+b+'".'));var t=f.firstElementChild;return null===t&&(t=document.createElement("div"),f.appendChild(t)),f.style.width=e.width,f.style.height=e.height,f.classList.add(k.dialog),t.classList.add(k.content),g.className=k.header,t.style.height=e.status_bar?f.offsetHeight-64+"px":f.offsetHeight-32+"px",o=document.createElement("div"),n=document.createElement("div"),o.style.display="inline-block",n.className="wui-dialog-title",o.innerHTML=e.title,n.appendChild(o),g.appendChild(n),f.classList.add(e.open?k.open:k.closed),e.draggable&&(f.classList.toggle(k.draggable),g.addEventListener("mousedown",y,!1),g.addEventListener("touchstart",y,!1)),e.closable&&(j=document.createElement("div"),j.className=k.btn+" "+k.btn_close,j.title="Close",g.appendChild(j)),e.minimizable&&(m=document.createElement("div"),m.className=k.btn+" "+k.minimize,e.minimized&&r(m,f),g.appendChild(m)),e.detachable&&(i=document.createElement("div"),i.className=k.btn+" "+k.detach,i.title="Detach",g.appendChild(i)),e.status_bar&&(p=document.createElement("div"),p.classList.add(k.status_bar),p.classList.add(k.transition),p.classList.add(k.open),p.innerHTML=e.status_bar_content,f.appendChild(p)),g.addEventListener("click",v,!1),g.addEventListener("touchstart",v,!1),window.addEventListener("resize",function(){s(!1)},!1),window.addEventListener("beforeunload",C,!1),f.classList.add(k.transition),f.classList.add(k.dim_transition),f.insertBefore(g,t),e.resizable&&(h=document.createElement("div"),h.addEventListener("mousedown",z,!1),h.addEventListener("touchstart",z,!1),h.classList.add("wui-dialog-resize"),h.classList.add(k.transition),h.classList.add(k.open),f.appendChild(h)),a[b]={dialog:f,minimized_id:-1,resize_handler:h,opts:e,detachable_ref:null,modal_element:null,status_bar:p},q(f),b},this.setStatusBarContent=function(b,c){var d,e,f=a[b];return void 0===f?void("undefined"!=typeof console&&console.log('Cannot setStatusBarContent of WUI dialog "'+b+'".')):void(f.status_bar&&(f.status_bar.innerHTML=c,e=f.detachable_ref,e&&(e.closed||(d=e.document.body.getElementsByClassName(k.status_bar),d.length>0&&(d[0].innerHTML=c)))))},this.open=function(b,c){var d,e,f,g=a[b];if(void 0===g)return void("undefined"!=typeof console&&console.log('Cannot open WUI dialog "'+b+'".'));if(g.detachable_ref&&!g.detachable_ref.closed)return void g.detachable_ref.focus();if(f=g.dialog,g.opts.modal)for(d=p(f),g.dialog.style.zIndex=16777271,g.modal_element=d,document.body.appendChild(d),e=0;j.length>e;e+=1)d=p(f),j[e].document.body.appendChild(d);return c?void u(f):(f.classList.remove(k.closed),f.classList.add(k.open),void o(f))},this.close=function(b,c){var d=a[b];return void 0===d?void("undefined"!=typeof console&&console.log('Cannot close WUI dialog "'+b+'".')):void n(d.dialog,!0,c)},this.destroy=function(b){var c,d=a[b];return void 0===d?void console.log("Element id '"+b+"' is not a WUI_Dialog, destroying aborted."):(n(d.dialog,!0,!1,!0),c=d.dialog,c.parentElement.removeChild(c),void delete a[b])},this.childWindowLoaded=function(b){var c=a[b],d=c.detachable_ref;d&&(d.document.body.firstElementChild?(t(c.dialog.children[1],d.document.body.firstElementChild),c.opts.on_detach&&c.opts.on_detach(d)):window.setTimeout(function(){WUI_Dialog.childWindowLoaded(b)},500))}},WUI_DropDown=new function(){"use strict";var a={},b={dropdown:"wui-dropdown",item:"wui-dropdown-item",content:"wui-dropdown-content",selected:"wui-dropdown-selected",open:"wui-dropdown-open",on:"wui-dropdown-on"},c={width:"auto",height:24,ms_before_hiding:2e3,vertical:!1,vspacing:0,selected_id:0,on_item_selected:null},d=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},e=function(a,c){var d,e=a.createElement("div"),f=null,g="";for(d=0;c.content_array.length>d;d+=1)g=c.content_array[d],f=a.createElement("div"),c.opts.vertical||f.classList.add("wui-dropdown-horizontal"),f.classList.add(b.item),f.innerHTML=g,f.dataset.index=d,e.appendChild(f),f.addEventListener("click",h,!1),g===c.content_array[c.selected_id]&&f.classList.add(b.selected);e.addEventListener("mouseover",i,!1),e.classList.add(b.content),e.dataset.linkedto=c.element.id,a.body.appendChild(e),c.floating_content=e},f=function(a,c,d){c.classList.remove(b.on),d.floating_content&&a.body.removeChild(d.floating_content),d.floating_content=null,d.close_timeout=null},g=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=null,g=null;d.classList.contains(b.dropdown)&&(e=a[d.id],g=e.floating_content,g?g.classList.contains(b.open)&&f(c.target.ownerDocument,d,e):i(c))},h=function(c){c.preventDefault(),c.stopPropagation();var d,e,g=c.target,h=null,i=null;if(g.classList.contains(b.item)){for(h=g.parentElement,d=a[h.dataset.linkedto],i=h.getElementsByTagName("div"),e=0;i.length>e;e+=1)i[e].classList.remove(b.selected);g.classList.add(b.selected),d.selected_id=parseInt(g.dataset.index,10),d.target_element.lastElementChild.innerHTML=g.textContent,void 0!==d.opts.on_item_selected&&d.opts.on_item_selected(g.dataset.index),f(g.ownerDocument,d.target_element,d)}},i=function(c){c.preventDefault(),c.stopPropagation();var f=c.target,g=null,h=null,i=null,k=f.ownerDocument,l=k.defaultView||k.parentWindow;if(f.classList.contains(b.dropdown))g=a[f.id],null===g.floating_content&&(f.classList.add(b.on),e(k,g),i=g.floating_content,h=d(f),i.style.top=h.top-i.offsetHeight-g.opts.vspacing+"px",i.style.left=h.left+"px",i.classList.add(b.open),g.target_element=f);else if(f.classList.contains(b.content))g=a[f.dataset.linkedto];else{if(!f.classList.contains(b.item))return;g=a[f.parentElement.dataset.linkedto]}l.clearTimeout(g.close_timeout),f.addEventListener("mouseleave",j,!1)},j=function(c){c.preventDefault();var d=c.target,e=null,g=d.ownerDocument,h=g.defaultView||g.parentWindow;e=d.classList.contains(b.content)?a[d.dataset.linkedto]:d.classList.contains(b.item)?a[d.parentElement.dataset.linkedto]:a[d.id],e.close_timeout=h.setTimeout(f,e.opts.ms_before_hiding,g,e.target_element,e),d.removeEventListener("mouseleave",j,!1)};this.create=function(d,e,f){var h,j=document.getElementById(d),k={};if(void 0!==a[d])return void console.log("WUI_DropDown id '"+d+"' already created, aborting.");for(h in c)c.hasOwnProperty(h)&&(k[h]=c[h]);if(void 0!==e)for(h in e)e.hasOwnProperty(h)&&void 0!==c[h]&&(k[h]=e[h]);j.classList.add(b.dropdown),j.style.width=k.width,j.style.height=k.height;var l=document.createElement("div");l.classList.add("wui-dropdown-icon"),j.appendChild(l);var m=document.createElement("div");m.classList.add("wui-dropdown-text"),0!==f.length&&(m.innerHTML=f[k.selected_id]),j.appendChild(m),j.addEventListener("click",g,!1),j.addEventListener("mouseover",i,!1);var n={element:j,floating_content:null,selected_id:k.selected_id,content_array:f,opts:k,button_item:m,hover_count:0,target_element:null,close_timeout:null};return a[d]=n,d},this.destroy=function(b){var c,d=a[b];return void 0===d?void console.log("Element id '"+b+"' is not a WUI_DropDown, destroying aborted."):(c=d.element,f(document,c,d),c.parentElement.removeChild(c),void delete a[b])}},WUI_RangeSlider=new function(){"use strict";var a={},b=null,c=null,d=null,e=null,f={hook:"wui-rangeslider-hook",bar:"wui-rangeslider-bar",filler:"wui-rangeslider-filler",hook_focus:"wui-rangeslider-hook-focus"},g={width:148,height:8,title:"",title_min_width:0,value_min_width:0,min:0,max:1,step:.01,scroll_step:.01,vertical:!1,title_on_top:!1,on_change:null,default_value:.5},h=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},i=function(a,b){null!==a&&a(b)},j=function(a,b){var c=""+a,d=c.indexOf("."),e=-1==d?c.length:1+d+b,f=c.substr(0,e),g=isNaN(f)?0:f;return parseFloat(g)},k=function(a){return a.classList.contains(f.hook)?a:a.classList.contains(f.filler)?a.firstElementChild:a.firstElementChild.firstElementChild},l=function(b,c,d){var e=b,f=e.childNodes[2],g=a[e.id],h=e.childNodes[1],i=h.firstElementChild,k=i.firstElementChild,l=c.opts.width,m=c.opts.height,n=Math.abs((d-c.opts.min)/c.opts.range);d=j(d,4),c.opts.vertical?(n=Math.round(n*h.offsetHeight),i.style.position="absolute",i.style.bottom="0",i.style.width="100%",i.style.height=n+"px",k.style.marginTop=-l+"px",k.style.marginLeft=-l/2-1+"px",k.style.width=2*l+"px",k.style.height=2*l+"px",f.style.marginTop="13px",g.element!==e&&(g.filler.style.position="absolute",g.filler.style.bottom="0",g.filler.style.width="100%",g.filler.style.height=n+"px",g.hook.style.marginTop=-l+"px",g.hook.style.marginLeft=-l/2-1+"px",g.hook.style.width=2*l+"px",g.hook.style.height=2*l+"px",g.value_input.style.marginTop="13px")):(n=Math.round(n*l),i.style.width=n+"px",i.style.height="100%",k.style.left=n+"px",k.style.marginTop=-m/2+"px",k.style.marginLeft=-m+"px",k.style.width=2*m+"px",k.style.height=2*m+"px",g.element!==e&&(g.filler.style.width=n+"px",g.filler.style.height="100%",g.hook.style.left=n+"px",g.hook.style.marginTop=-m/2+"px",g.hook.style.marginLeft=-m+"px",g.hook.style.width=2*m+"px",g.hook.style.height=2*m+"px")),g.value_input.value=d,f.value=d,c.value=d},m=function(a){if(a.preventDefault(),null!==d){var f,g,k=d.parentElement,l=k.parentElement,m=l.parentElement.lastElementChild,n=h(l),o=l.offsetWidth,p=0,q=a.clientX,r=a.clientY,s=a.changedTouches,t=null;if(s)for(f=0;s.length>f;f+=1)if(t=s[f],t.identifier===e){q=s[f].clientX,r=s[f].clientY;break}if(c.opts.vertical?(o=l.offsetHeight,p=Math.round((n.top+l.offsetHeight-r)/c.opts.step)*c.opts.step):p=Math.round((q-n.left)/c.opts.step)*c.opts.step,p>o?(p=o,b=c.opts.max):0>p?(p=0,b=c.opts.min):b=Math.round((c.opts.min+p/o*c.opts.range)/c.opts.step)*c.opts.step,c.value===b)return;c.value=b,g=j(b,4),m.value=g,c.value_input.value=g,c.opts.vertical?(k.style.height=p+"px",c.filler.style.height=p+"px"):(k.style.width=p+"px",c.filler.style.width=p+"px",d.style.left=p+"px",c.hook.style.left=p+"px"),i(c.opts.on_change,b)}},n=function(a){if(d){a.preventDefault();var b,g=a.changedTouches,h=null,i=!1,j=d.ownerDocument,k=j.defaultView||j.parentWindow;if(g){for(b=0;g.length>b;b+=1)if(h=g[b],h.identifier===e){i=!0,k.removeEventListener("touchend",n,!1),k.removeEventListener("touchmove",m,!1);break}}else i=!0,k.removeEventListener("mouseup",n,!1),k.removeEventListener("mousemove",m,!1);i&&(d.classList.remove(f.hook_focus),d=null,c=null,j.body.style.cursor="default")}},o=function(b){b.preventDefault(),b.stopPropagation();var g,h,i=null,j=!1,l=b.changedTouches;null===c&&l&&(e=l[0].identifier,j=!0),0===b.button&&(j=!0),j&&(d=k(b.target),d.classList.add(f.hook_focus),i=d.parentElement.parentElement.parentElement,c=a[i.id],g=i.ownerDocument,h=g.defaultView||g.parentWindow,g.body.style.cursor="pointer",m(b),h.addEventListener("mousemove",m,!1),h.addEventListener("touchmove",m,!1),h.addEventListener("mouseup",n,!1),h.addEventListener("touchend",n,!1))},p=function(b){b.preventDefault(),b.stopPropagation();var c=b.target,d=c.parentElement.parentElement.parentElement,e=a[d.id],f=e.opts.default_value;l(d,e,f),i(e.opts.on_change,f)},q=function(b){b.preventDefault(),b.stopPropagation();var c=k(b.target),d=c.parentElement.parentElement.parentElement,e=a[d.id],f=b.wheelDelta?b.wheelDelta/40:b.detail?-b.detail:0,g=e.value;f>=0?g+=e.opts.scroll_step:g-=e.opts.scroll_step,g>e.opts.max?g=e.opts.max:e.opts.min>g&&(g=e.opts.min),l(d,e,g),i(e.opts.on_change,g)},r=function(b){if(!b.target.validity||b.target.validity.valid){var c=b.target.parentElement.childNodes[1];if(void 0!==c){var d=k(c),e=d.parentElement.parentElement.parentElement,f=a[e.id];l(e,f,b.target.value),i(f.opts.on_change,b.target.value)}}};this.create=function(b,c){var d,e=document.getElementById(b),h={};if(void 0!==a[b])return void console.log("WUI_RangeSlider id '"+b+"' already created, aborting.");for(d in g)g.hasOwnProperty(d)&&(h[d]=g[d]);if(void 0!==c){for(d in c)c.hasOwnProperty(d)&&void 0!==g[d]&&(h[d]=c[d]);void 0!==c.max&&(h.range=c.max),void 0!==c.step&&(h.step=c.step,void 0===c.scroll_step&&(h.scroll_step=h.step)),void 0!==c.title_on_top?h.title_on_top=c.title_on_top:h.vertical&&(h.title_on_top=!0),void 0!==c.default_value?h.default_value=c.default_value:void 0!==c.min&&void 0!==c.max&&(h.default_value=h.min+h.max/2)}0>h.min&&(h.range=h.max-h.min),a[b]=null,e.classList.add("wui-rangeslider"),h.title_on_top&&e.classList.add("wui-rangeslider-title-ontop");var i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),s=document.createElement("input"),t={element:e,opts:h,bar:j,filler:k,hook:m,value_input:s,value:h.default_value};return i.innerHTML=h.title,s.setAttribute("value",h.default_value),s.setAttribute("type","number"),s.setAttribute("min",h.min),s.setAttribute("max",h.max),s.setAttribute("step",h.step),s.classList.add("wui-rangeslider-input"),n.classList.add("wui-rangeslider-value"),i.classList.add("wui-rangeslider-title"),j.classList.add(f.bar),k.classList.add(f.filler),m.classList.add(f.hook),h.vertical&&(i.style.textAlign="center"),i.style.minWidth=h.title_min_width+"px",n.style.minWidth=h.value_min_width+"px",s.style.minWidth=h.value_min_width+"px",j.style.width=h.width+"px",j.style.height=h.height+"px",j.appendChild(k),k.appendChild(m),e.appendChild(i),e.appendChild(j),e.appendChild(s),j.addEventListener("mousedown",o,!1),j.addEventListener("touchstart",o,!1),m.addEventListener("dblclick",p,!1),s.addEventListener("input",r,!1),j.addEventListener("mousewheel",q,!1),j.addEventListener("DOMMouseScroll",q,!1),a[b]=t,l(e,t,h.default_value),b},this.destroy=function(b){var c,d=a[b];return void 0===d?void console.log("Element id '"+b+"' is not a WUI_RangeSlider, destroying aborted."):(c=d.element,c.parentElement.removeChild(c),void delete a[b])}},WUI_Tabs=new function(){"use strict";var a={},b={enabled:"wui-tab-enabled",disabled:"wui-tab-disabled",display_none:"wui-tab-display-none",tabs:"wui-tabs",tab:"wui-tab",tabs_content:"wui-tabs-content",tab_content:"wui-tab-content",underline:"wui-tabs-underline"},c={on_tab_click:null,height:"calc(100% - 30px)"},d=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=d.parentElement,f=e.nextElementSibling.nextElementSibling,g=e.parentElement.id,h=a[g],i=0,j=null,k=0;for(k=0;e.childElementCount>k;k+=1)j=e.children[k],j.classList.remove(b.enabled),j.classList.add(b.disabled),h.tabs[k].classList.remove(b.enabled),h.tabs[k].classList.add(b.disabled),j===d&&(i=k);for(k=0;f.childElementCount>k;k+=1)j=f.children[k],j.classList.remove(b.display_none),h.contents[k].classList.remove(b.display_none),i!==k&&(j.classList.add(b.display_none),h.contents[k].classList.add(b.display_none));h.tabs[i].classList.remove(b.disabled),h.tabs[i].classList.add(b.enabled),c.target.classList.remove(b.disabled),c.target.classList.add(b.enabled),h.opts.on_tab_click&&h.opts.on_tab_click(i)};this.create=function(e,f){var g,h=document.getElementById(e),i=h.firstElementChild,j=document.createElement("div"),k=i.nextElementSibling,l=i.children[0],m={},n=0;if(void 0!==a[e])return void console.log("WUI_Tabs id '"+e+"' already created, aborting.");for(g in c)c.hasOwnProperty(g)&&(m[g]=c[g]);if(void 0!==f)for(g in f)f.hasOwnProperty(g)&&void 0!==c[g]&&(m[g]=f[g]);h.style.overflow="hidden",j.className="wui-tabs-underline",h.insertBefore(j,k),i.classList.add(b.tabs);var o=i.childElementCount,p=[];for(n=0;o>n;n+=1){var q=i.children[n];q.classList.add("wui-tab"),q!==l&&q.classList.add(b.disabled),q.addEventListener("click",d,!1),q.addEventListener("touchstart",d,!1),p.push(q)}l.classList.add(b.enabled),l.classList.add("wui-first-tab"),k.classList.add("wui-tabs-content");var r=k.childElementCount,s=[k.children[0]];for(k.style.height=m.height,k.children[0].classList.add(b.tab_content),n=1;r>n;n+=1){var t=k.children[n];t.classList.add(b.tab_content),t.classList.add(b.display_none),s.push(t)}return a[e]={element:h,tabs:p,contents:s,opts:m},e},this.getContentElement=function(a,b){var c=document.getElementById(a),d=c.firstElementChild.nextElementSibling.nextElementSibling;return d.children[b]},this.getTabName=function(a,b){var c=this.getContentElement(a,b);return c.getAttribute("data-group-name")},this.destroy=function(c){var d,e,f,g,h,i=a[c];if(void 0===i)return void console.log("Element id '"+c+"' is not a WUI_Tabs, destroying aborted.");if(d=i.element,d.classList.contains("wui-dialog-content"))for(e=d.getElementsByClassName(b.tabs),f=d.getElementsByClassName(b.underline),g=d.getElementsByClassName(b.tabs_content),h=0;e.length>h;h+=1)d.removeChild(e[h]),d.removeChild(f[h]),d.removeChild(g[h]);else d.parentElement.removeChild(d);delete a[c]}},WUI_ToolBar=new function(){"use strict";var a={},b={minimize_icon:"wui-toolbar-minimize-icon",maximize_icon:"wui-toolbar-maximize-icon",button:"wui-toolbar-button",minimize_group:"wui-toolbar-minimize-group",minimize_gr_v:"wui-toolbar-minimize-group-vertical",toggle:"wui-toolbar-toggle",toggle_on:"wui-toolbar-toggle-on",item:"wui-toolbar-item",group:"wui-toolbar-group",vertical_group:"wui-toolbar-group-vertical",tb:"wui-toolbar",dd_content:"wui-toolbar-dropdown-content",dd_item:"wui-toolbar-dropdown-item",dd_open:"wui-toolbar-dropdown-open"},c={item_hmargin:null,item_vmargin:null,item_width:32,item_height:32,icon_width:32,icon_height:32,allow_groups_minimize:!1,vertical:!1},d=function(b){var c=a[b];return void 0===c?("undefined"!=typeof console&&console.log('_getWidget failed, the element id "'+b+'" is not a WUI_ToolBar.'),null):c},e=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},f=function(c,d){return void 0!==d?a[d]:c.classList.contains(b.tb)?a[c.id]:c.classList.contains(b.minimize_icon)||c.classList.contains(b.maximize_icon)||c.classList.contains(b.vertical_group)||c.classList.contains(b.group)?a[c.parentElement.id]:a[c.parentElement.parentElement.id]},g=function(a,b,c){if(void 0!==a.on_click&&null!==a.on_click){var d={id:a.id,type:b};void 0!==c&&(d.state=c),a.on_click(d)}},h=function(a,c,d){var e,f=a.createElement("div");if(void 0!==c.items)for(e=0;c.items.length>e;e+=1){var g=c.items[e],h=a.createElement("div");c.vertical||h.classList.add("wui-toolbar-dropdown-horizontal"),h.classList.add(b.dd_item),h.innerHTML=g.title,h.dataset.index=e,f.appendChild(h)}return f.addEventListener("click",j,!1),f.style.width=d.dd_items_width+"px",f.classList.add(b.dd_content),f.dataset.linkedto_tb=d.element.id,f.dataset.linkedto_tool_index=c.id,a.body.appendChild(f),f},i=function(a,c,d){var e,h,i,j=null,k=!1,l=0;j=f(a,c),h=j.element,a.parentElement&&a.parentElement.parentElement&&(h=a.parentElement.parentElement);var m=j.tools[parseInt(a.dataset.tool_id,10)];if("1"===m.element.dataset.on?(m.element.dataset.on=0,a.dataset.on=0,m.element.title=m.tooltip,a.title=m.tooltip,void 0!==m.icon&&(m.element.classList.add(m.icon),m.element.classList.remove(m.toggled_icon),a.classList.add(m.icon),a.classList.remove(m.toggled_icon))):(m.element.dataset.on=1,a.dataset.on=1,void 0!==m.tooltip_toggled&&(m.element.title=m.tooltip_toggled,a.title=m.tooltip_toggled),void 0!==m.toggled_icon&&(m.element.classList.add(m.toggled_icon),m.element.classList.remove(m.icon),a.classList.add(m.toggled_icon),a.classList.remove(m.icon)),k=!0),"none"!==m.toggled_style&&(a.classList.contains(b.toggle_on)?(m.element.classList.remove(b.toggle_on),a.classList.remove(b.toggle_on)):(m.element.classList.add(b.toggle_on),a.classList.add(b.toggle_on))),e=a.dataset.toggle_group,void 0!==e)for(i=h.getElementsByClassName(b.item),l=0;i.length>l;l+=1){var n=i[l],o=j.tools[parseInt(n.dataset.tool_id,10)];if(e===n.dataset.toggle_group&&n.dataset.tool_id!==a.dataset.tool_id){if("0"===n.dataset.on)continue;n.dataset.on="0",o.element.dataset.on="0",n.classList.remove(b.toggle_on),o.element.classList.remove(b.toggle_on),void 0!==m.toggled_icon&&(n.classList.remove(o.toggled_icon),o.element.classList.remove(o.toggled_icon)),void 0!==m.icon&&(n.classList.add(o.icon),o.element.classList.add(o.icon)),(d||void 0===d)&&g(o,"toggle",!1)}}(d===!0||void 0===d)&&g(m,"toggle",k)},j=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=d.ownerDocument,f=d.parentElement,g=a[f.dataset.linkedto_tb],h=parseInt(f.dataset.linkedto_tool_index,10),i=g.tools[h],j=parseInt(d.dataset.index,10),l=i.items[j],m=e.getElementById(f.dataset.linkedto_tb),n=m.getElementsByClassName(b.item),o=n[h];void 0!==l.on_click&&(l.on_click(),o.classList.remove(b.toggle_on),i.element.classList.remove(b.toggle_on),k(i,o))},k=function(a,c){var d,e,f=c.ownerDocument,g=f.body.getElementsByClassName(b.dd_content);for(e=0;g.length>e;e+=1)d=g[e],d.removeEventListener("click",j,!1),d.parentElement.removeChild(d);a.element.classList.remove(b.toggle_on),c.classList.remove(b.toggle_on)},l=function(a,b){var c=function(){var d=b.ownerDocument,e=d.defaultView||d.parentWindow;k(a,b),e.removeEventListener("click",c)};return c},m=function(a){a.preventDefault();var c=a.target;if(c.classList.contains(b.minimize_group)||c.classList.contains(b.minimize_gr_v))return void n(c);if(c.classList.contains(b.toggle))return void i(c);if(!(c.classList.contains(b.tb)||c.classList.contains(b.group)||c.classList.contains(b.vertical_group))){var d=null,j=null,m=null,o=null,p=c.ownerDocument,q=p.defaultView||p.parentWindow;if(o=f(c),d=o.tools[c.dataset.tool_id],"dropdown"===d.type){if(c.classList.contains(b.toggle_on))return void k(d,c);j=h(p,d,o);var r=d.element;c.classList.add(b.toggle_on),r.classList.add(b.toggle_on),m=e(c),"tb_item"===d.dd_items_width&&(j.style.width=c.offsetWidth+"px"),"s"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+"px"):"sw"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"nw"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"se"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):"ne"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):(j.style.top=m.top-j.offsetHeight+"px",
j.style.left=m.left+"px"),j.classList.add(b.dd_open),a.stopPropagation&&a.stopPropagation(),q.addEventListener("click",l(d,c),!1)}else g(d,"click")}},n=function(a){var c=a.nextSibling;a.classList.contains(b.minimize_icon)?(a.classList.add(b.maximize_icon),a.classList.remove(b.minimize_icon),a.title="Maximize group",c.style.display="none"):(a.classList.add(b.minimize_icon),a.classList.remove(b.maximize_icon),a.title="Minimize group",c.style.display="")};this.create=function(d,e,f){var g,h=document.getElementById(d),j=null,k=null,l=null,n=null,o={};if(void 0!==a[d])return void console.log("WUI_Toolbar id '"+d+"' already created, aborting.");for(g in c)c.hasOwnProperty(g)&&(o[g]=c[g]);if(void 0!==e)for(g in e)e.hasOwnProperty(g)&&void 0!==c[g]&&(o[g]=e[g]);a[d]={element:h,tools:[],opts:o},h.classList.add(b.tb);var p=b.group,q=b.item,r="wui-toolbar-spacer",s=b.minimize_group;o.vertical?(h.classList.add("wui-toolbar-vertical"),p=b.vertical_group,q+=" wui-toolbar-item-vertical",r="wui-toolbar-spacer-vertical",s=b.minimize_gr_v,h.style.maxWidth=o.item_width+4+"px",null===o.item_hmargin&&(o.item_hmargin=3),null===o.item_vmargin&&(o.item_vmargin=8)):(h.style.maxHeight=o.item_height+4+"px",null===o.item_hmargin&&(o.item_hmargin=3),null===o.item_vmargin&&(o.item_vmargin=0)),s=b.button+" "+b.minimize_icon+" "+s,h.addEventListener("click",m,!1);var t;for(l in f)if(f.hasOwnProperty(l)){null!==n&&(k=document.createElement("div"),k.className=r,h.appendChild(k)),o.allow_groups_minimize&&(k=document.createElement("div"),k.className=s,k.title="Minimize group",h.appendChild(k)),j=f[l];var u=document.createElement("div");for(u.className=p,o.vertical?u.style.maxWidth=o.item_width+"px":u.style.maxHeight=o.item_height+"px",t=0;j.length>t;t+=1){var v,w=j[t],x=document.createElement("div"),y=a[d].tools.length,z={element:x,on_click:w.on_click,icon:w.icon,items:[],tooltip:"",type:w.type,dd_items_width:w.dropdown_items_width,orientation:w.orientation,id:y};if(x.className=q,x.style.minWidth=o.item_width+"px",x.style.minHeight=o.item_height+"px",x.style.marginLeft=o.item_hmargin+"px",x.style.marginRight=o.item_hmargin+"px",x.style.marginTop=o.item_vmargin+"px",x.style.marginBottom=o.item_vmargin+"px",x.style.backgroundSize=o.icon_width-4+"px "+(o.icon_height-4)+"px",u.appendChild(x),a[d].tools.push(z),x.dataset.tool_id=y,z.tooltip=w.tooltip,void 0!==w.tooltip&&(x.title=w.tooltip),void 0!==w.text&&(x.innerHTML=w.text,x.style.lineHeight=o.item_height+"px",x.classList.add("wui-toolbar-text"),void 0!==w.icon&&(x.style.paddingLeft=o.icon_width+2+"px",x.style.backgroundPosition="left center")),void 0!==w.icon&&x.classList.add(w.icon),"toggle"===w.type)x.classList.add(b.toggle),z.toggled_icon=w.toggled_icon,z.tooltip_toggled=w.tooltip_toggled,z.toggled_style=w.toggled_style,void 0!==w.toggle_group&&(x.dataset.toggle_group=w.toggle_group),w.toggle_state&&(x.dataset.on="1");else if("dropdown"===w.type){if(x.classList.add(b.button),void 0!==w.items)for(v=0;w.items.length>v;v+=1){var A=w.items[v];z.items.push({title:A.title,on_click:A.on_click})}}else x.classList.add(b.button)}h.appendChild(u),n=j}var B=h.getElementsByClassName(b.item);for(t=0;B.length>t;t+=1){var C=B[t];"1"===C.dataset.on&&(C.dataset.on="0",i(C,d,!0))}return d},this.hideGroup=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.element.getElementsByClassName(h.opts.vertical?b.vertical_group:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.minimize_group)||g.classList.contains(b.minimize_gr_v))&&(g.style.display="none"),f.style.display="none"}},this.showGroup=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.element.getElementsByClassName(h.opts.vertical?b.vertical_group:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.minimize_group)||g.classList.contains(b.minimize_gr_v))&&(g.style.display=""),e[c].style.display=""}},this.toggle=function(a,b,c){var e=d(a);e&&i(e.tools[b].element,a,c)},this.getItemElement=function(a,b){var c=d(a);return c?c.tools[b].element:void 0},this.destroy=function(b){var c,d,e,f,g,h,i,j=a[b];if(void 0===j)return void console.log("Element id '"+b+"' is not a WUI_ToolBar, destroying aborted.");for(c=j.toolbar,d=j.tools,c.parentElement.removeChild(c),i=0;d.length>i;i+=1)e=d[i],"dropdown"===e.type&&(f=e.items,f.length>0&&(g=f[0],h=g.element,h.parentElement.removeChild(h)));delete a[b]}},WUI_CircularMenu=new function(){"use strict";var a=[],b=0,c={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},d={x:null,y:null,rx:64,ry:48,item_width:32,item_height:32,window:null,element:null},e=function(b){var c,d;for(d=0;a.length>d;d+=1)c=a[d],b.body.removeChild(c);a=[]},f=function(a,b,c){var d=function(a){a.preventDefault(),c(),e(b)};return d},g=function(a,d){var f=function(g){g.preventDefault();var h=(new Date).getTime();500>=h-b||g.target.classList.contains(c.item)||(e(d),a.removeEventListener("click",f),a.removeEventListener("mousedown",f))};return f},h=function(d,h,i,j,k,l){e(j);var m,n,o,p=-(Math.PI/2),q=h.length,r=2*Math.PI/q;for(o=0;q>o;o+=1)n=h[o],m=document.createElement("div"),m.classList.add(c.item),m.style.width=d.item_width+"px",m.style.height=d.item_height+"px",m.style.backgroundSize=d.item_width-4+"px "+(d.item_height-4)+"px",m.style.left=k+d.rx*Math.cos(p)+"px",m.style.top=l+d.ry*Math.sin(p)+"px",m.classList.add(n.icon),n.tooltip&&(m.title=n.tooltip),j.body.appendChild(m),i.getComputedStyle(m).width,a.push(m),n.on_click&&m.addEventListener("click",f(i,j,n.on_click)),m.classList.add(c.show),p+=r;var s=g(i,j);i.addEventListener("click",s),b=(new Date).getTime(),i.addEventListener("mousedown",s)};this.create=function(a,b){var c,e,f,g,i,j={},k=document,l=window;for(c in d)d.hasOwnProperty(c)&&(j[c]=d[c]);if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&void 0!==d[c]&&(j[c]=a[c]);g=j.element,null!==g?(i=g.getBoundingClientRect(),k=g.ownerDocument,l=k.defaultView||k.parentWindow,e=i.left+(i.width-j.item_width)/2,f=i.top+(i.height-j.item_height)/2,h(j,b,l,k,e,f)):null!==e&&null!==f&&(null!==j.window&&(l=j.window,k=l.document),e=j.x-j.item_width/2,f=j.y-j.item_height/2,h(j,b,l,k,e,f))}},WUI=new function(){"use strict";var a={display_none:"wui-display-none",hide_fi_500:"wui-hide-fi-500",hide_show_500:"wui-show-fi-500",draggable:"wui-draggable"},b=[],c=null,d=null,e=0,f=0,g=function(b,c,d){var e=function(){d&&b.classList.add(a.display_none),c&&c(),b.removeEventListener("transitionend",e)};return e},h=function(b){b.preventDefault();var g=b.clientX,h=b.clientY,k=b.changedTouches;if(b.target.classList.contains(a.draggable)){if(null===c)if(k)d=k[0].identifier,g=k[0].clientX,h=k[0].clientY;else if(0!==b.button)return;c=b.target,document.body.style.cursor="move",e=g-parseInt(c.style.left,10),f=h-parseInt(c.style.top,10),window.addEventListener("mousemove",i,!1),window.addEventListener("touchmove",i,!1),window.addEventListener("mouseup",j,!1),window.addEventListener("touchend",j,!1)}},i=function(a){a.preventDefault();var g,h,i,j=a.clientX,k=a.clientY,l=a.changedTouches,m=null,n=b[parseInt(c.dataset.wui_draggable_id,10)];if(l)for(g=0;l.length>g;g+=1)if(m=l[g],m.identifier===d){j=l[g].clientX,k=l[g].clientY;break}h=j-e,i=k-f,c.style.left=h+"px",c.style.top=i+"px",n&&n.cb(c,h,i)},j=function(a){a.preventDefault();var e,f=a.changedTouches,g=null;if(0!==b.length)if(f){for(e=0;f.length>e;e+=1)if(g=f[e],g.identifier===d){c=null,document.body.style.cursor="default",window.removeEventListener("touchmove",i,!1),window.removeEventListener("touchend",j,!1);break}}else c=null,document.body.style.cursor="default",window.removeEventListener("mousemove",i,!1),window.removeEventListener("mouseup",j,!1)};this.fadeOut=function(b,c,d,e){(void 0===c||null===c)&&(c=500),void 0===b.style.WebkitTransition?b.style.transition="visibility 0s ease-in-out "+c+"ms, opacity "+c+"ms ease-in-out":b.style.WebkitTransition="visibility 0s ease-in-out "+c+"ms, opacity "+c+"ms ease-in-out",b.addEventListener("transitionend",g(b,d,e),!1),b.classList.add(a.hide_fi_500),b.classList.remove(a.hide_show_500)},this.fadeIn=function(b,c){(void 0===c||null===c)&&(c=500),void 0===b.style.WebkitTransition?b.style.transition="visibility 0s ease-in-out 0s, opacity "+c+"ms ease-in-out":b.style.WebkitTransition="visibility 0s ease-in-out 0s, opacity "+c+"ms ease-in-out",b.classList.remove(a.hide_fi_500),b.classList.add(a.hide_show_500),b.classList.remove(a.display_none)},this.draggable=function(c,d,e){if(d){if(c.classList.contains(a.draggable))return;c.classList.add(a.draggable),c.addEventListener("mousedown",h,!1),c.addEventListener("touchstart",h,!1),c.dataset.wui_draggable_id=b.length,b.push({cb:e,element:c})}else{if(!c.classList.contains(a.draggable))return;c.classList.remove(a.draggable),c.removeEventListener("mousedown",h,!1),c.removeEventListener("touchstart",h,!1);var f,g=parseInt(c.dataset.wui_draggable_id,10);for(b.splice(g,1),f=0;b.length>f;f+=1){var i=b[f];i.element.dataset.wui_draggable_id=f}}}};