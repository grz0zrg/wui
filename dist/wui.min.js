var WUI_Dialog=new function(){"use strict";var a=this,b={},c=null,d=null,e=null,f=0,g=0,h=0,i=0,j=null,k=[],l={g:"wui-dialog",content:"wui-dialog-content",h:"wui-dialog-btn",i:"wui-dialog-close",detach:"wui-dialog-detach",j:"wui-dialog-minimized",k:"wui-dialog-minimize",l:"wui-dialog-maximize",m:"wui-dialog-header",open:"wui-dialog-open",closed:"wui-dialog-closed",draggable:"wui-dialog-draggable",transition:"wui-dialog-transition",o:"wui-dialog-dim-transition",p:"wui-dialog-modal",q:"wui-dialog-status-bar"},m={title:"",width:"80%",height:"40%",open:!0,s:!0,t:!1,draggable:!1,u:!1,v:!1,A:"title",B:32,q:!1,C:"",D:!1,F:"left",G:"top",top:0,left:0,p:!1,j:!1,H:null,I:null,J:null};Element.prototype.K||(Element.prototype.K=Element.prototype.addEventListener,Element.prototype.addEventListener=function(a,b,c){this.K(a,b,c),this.L||(this.L={}),this.L[a]||(this.L[a]=[]),this.L[a].push(b)},Element.prototype.M=Element.prototype.removeEventListener,Element.prototype.removeEventListener=function(a,b,c){if(this.L){var d,e=this.L[a];if(e)for(d=0;d<e.length;d+=1)if(e[d]===b){e.splice(d,1);break}}this.M(a,b,c)});var n=function(a){var b=0;for(b=0;b<k.length;b+=1)if(k[b]===a.N){k.splice(b,1);break}},o=function(a,c,d,e){var f,g,h,i,j=b[a.id];if(j&&(c&&j.N&&(j.N.closed||j.N.close(),n(j)),!j.g.classList.contains(l.closed))){if(e&&j.O)for(document.body.removeChild(j.O),g=0;g<k.length;g+=1)for(i=k[g],f=i.document.body.getElementsByClassName(l.p),h=0;h<f.length;h+=1)i.document.body.removeChild(f[h]);j.g.classList.contains(l.open)&&(a.classList.add(l.closed),a.classList.remove(l.open),d&&null!==j.P.H&&j.P.H())}},p=function(a){var c=0,d=null,e=null,f=b[a.id];if(!f.P.p){for(var g in b)b.hasOwnProperty(g)&&(d=b[g].g,isNaN(d.style.zIndex)||(c=parseInt(d.style.zIndex,10),c>100&&(d.style.zIndex=100)));for(e=f.g.parentElement;null!==e;)e.classList.contains(l.g)&&(e.style.zIndex=101),e=e.parentElement;a.style.zIndex=101}},q=function(a){var b=document.createElement("div");return b.className="wui-dialog-modal",b.addEventListener("click",function(b){b.preventDefault(),o(a,!0,!0,!0)}),b.style.zIndex=16777270,b},r=function(a){var c=b[a.id],d=c.P,e=a.parentElement.offsetWidth,f=a.parentElement.offsetHeight,g=a.offsetWidth,h=a.offsetHeight;a.style.left="center"===d.F?Math.round((e-g)/2+d.left)+"px":"right"===d.F?e-g+d.left+"px":d.left+"px",a.style.top="center"===d.G?Math.round((f-h)/2+d.top)+"px":"bottom"===d.G?f-h+d.top+"px":d.top+"px"},s=function(a,c){var d=b[c.id],e=d.R;d.g!==c&&s(d.S,d.g),a.classList.toggle(l.k),a.classList.toggle(l.l),c.classList.toggle(l.j),c.classList.contains(l.j)?(c.style.borderStyle="solid",c.style.borderColor="#808080",c.style.borderWidth="1px"):(c.style.borderStyle="",c.style.borderColor="",c.style.borderWidth=""),e&&e.classList.toggle(l.open),d.q&&d.q.classList.toggle(l.open)},t=function(a){null===j&&(j=setTimeout(function(){j=null;var c,d,e,f,g,h,i,k=document;if(a)for(k=a.document,c=k.getElementsByClassName(l.content),i=0;i<c.length;i+=1)e=c[i],f=e.parentElement,d=b[f.id],g=f.getElementsByClassName(l.q),e.style.height=g.length>0?a.innerHeight-32+"px":a.innerHeight+"px",h=e.getBoundingClientRect(),d.P.J&&d.P.J(h.width,h.height);else for(c=k.getElementsByClassName(l.content),i=0;i<c.length;i+=1)e=c[i],f=e.parentElement,g=f.getElementsByClassName(l.q),e.style.height=g.length>0?f.offsetHeight-64+"px":f.offsetHeight-32+"px",r(f),h=e.getBoundingClientRect(),d=b[f.id],d.P.J&&d.P.J(h.width,h.height)},125))},u=function(a,b){var c,d;do{if(1==a.nodeType&&a.L)for(c in a.L)if("length"!==c&&a.L.hasOwnProperty(c))for(d=0;d<a.L[c].length;d+=1)b.addEventListener(c,a.L[c][d],!1);a.hasChildNodes()&&u(a.firstChild,b.firstChild),a=a.nextSibling,b=b.nextSibling}while(a&&b)},v=function(a){var c,d,e,f,g,h,i,j=b[a.id],m=a.firstElementChild.firstElementChild.firstElementChild,n=m.textContent||m.innerText||"",p=j.N,q=a.getBoundingClientRect();for(a.classList.contains(l.j)?(c=parseInt(a.style.width,10),d=parseInt(a.style.height,10)-32):(c=q.width,d=q.height-32),e=void 0!==window.screenLeft?window.screenLeft:screen.left,f=void 0!==window.screenTop?window.screenTop:screen.top,o(a,!0,!1,!1),p=window.open("",n,["toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes","width="+c,"height="+d,"top="+(q.top+f+32),"left="+(q.left+e)].join(",")),j.N=p,h="",g=document.head.getElementsByTagName("link"),i=0;i<g.length;i+=1)"text/css"===g[i].type&&"stylesheet"===g[i].rel&&(h+=g[i].outerHTML);for(g=document.head.getElementsByTagName("style"),i=0;i<g.length;i+=1)h+=g[i].outerHTML;p.document.open(),p.document.write("<html><head>"+("<title>"+n+"</title>")+h+"</head>"+('<body id="'+a.id+'" class="wui-dialog-detach-window-body" onload="parent.opener.WUI_Dialog.childWindowLoaded(document.body.id)">')+"</body></html>"),p.document.close(),p.document.body.appendChild(a.children[1].cloneNode(!0));var r=a.getElementsByClassName(l.q);if(r.length>0){var s=r[0].cloneNode(!0);s.classList.add(l.open),p.document.body.appendChild(s)}p.addEventListener("keyup",function(b){27===b.keyCode&&o(a,!0,!0,!0)},!1),p.addEventListener("resize",function(){t(p)},!1),p.addEventListener("beforeunload",function(){o(a,!0,!0,!0)},!1),k.push(p)},w=function(a){a.preventDefault();var b=a.target,c=null;b.classList.contains(l.i)?(c=b.parentElement.parentElement,o(c,!1,!0,!0)):b.classList.contains(l.l)||b.classList.contains(l.k)?(c=b.parentElement.parentElement,s(b,c)):b.classList.contains(l.detach)&&(c=b.parentElement.parentElement,v(c))},x=function(c){if(27===c.keyCode){var d,e;for(d in b)if(b.hasOwnProperty(d)&&(e=b[d],e.P.s&&"101"===e.g.style.zIndex&&e.g.classList.contains(l.open)))return void a.close(d,!0)}},y=function(a){if(c){a.preventDefault();var d,h,i,j=b[c.id],k=a.clientX,l=a.clientY,m=a.changedTouches,n=null;if(m)for(d=0;d<m.length;d+=1)if(n=m[d],n.identifier===e){k=m[d].clientX,l=m[d].clientY;break}h=k-f,i=l-g,c.style.left=h+"px",c.style.top=i+"px",j.g!==c&&(j.g.style.left=h+"px",j.g.style.top=i+"px")}},z=function(a){if(c){var b,d=a.changedTouches,f=null,g=c.ownerDocument,h=g.defaultView||g.parentWindow;if(d){for(b=0;b<d.length;b+=1)if(f=d[b],f.identifier===e){c=null,g.body.style.cursor="default",h.removeEventListener("touchmove",y,!1),h.removeEventListener("touchend",z,!1);break}}else c=null,g.body.style.cursor="default",h.removeEventListener("mousemove",y,!1),h.removeEventListener("mouseup",z,!1)}},A=function(a){var b,d,h,i=a.clientX,j=a.clientY,k=0,m=0,n=a.changedTouches;if(a.preventDefault(),null===c)if(n)e=n[0].identifier,i=n[0].clientX,j=n[0].clientY;else if(0!==a.button)return;h=a.target.parentElement,!h.classList.contains(l.l)&&h.classList.contains(l.draggable)&&(c=h,b=c.ownerDocument,d=b.defaultView||b.parentWindow,p(c),b.body.style.cursor="move",k=parseInt(c.style.left,10),m=parseInt(c.style.top,10),f=i-k,g=j-m,d.addEventListener("mousemove",y,!1),d.addEventListener("touchmove",y,!1),d.addEventListener("mouseup",z,!1),d.addEventListener("touchend",z,!1))},B=function(a){a.preventDefault(),a.stopPropagation();var b=a.target.parentElement,c=b.offsetLeft,f=b.offsetTop,g=a.changedTouches,j=b.ownerDocument,k=j.defaultView||j.parentWindow;g&&(e=g[0].identifier),h=c,i=f,b.classList.remove(l.o),k.addEventListener("mousemove",C,!1),k.addEventListener("touchmove",C,!1),k.addEventListener("mouseup",D,!1),k.addEventListener("touchend",D,!1),d=b},C=function(a){a.preventDefault();var c,f,g=a.clientX,j=a.clientY,k=a.changedTouches,m=null,n=b[d.id],o=null,p=null,q=0,s=0,t=0;if(k)for(s=0;s<k.length;s+=1)if(m=k[s],m.identifier===e){g=k[s].clientX,j=k[s].clientY;break}for(c=g-h,f=j-i,p=d.firstElementChild.firstElementChild.firstElementChild,q=p.offsetWidth+148,"title"===n.P.A&&c<q?c=q:c<n.P.A&&(c=n.P.A),n.P.q&&(t=32),f<n.P.B+t&&(f=n.P.B+t),d.style.width=c+"px",d.classList.contains(l.j)||(d.style.height=f+"px"),o=d.getElementsByClassName(l.content),s=0;s<o.length;s+=1){var u,v=o[s],w=b[v.parentElement.id];v.style.height=d.offsetHeight-32-t+"px",u=v.getBoundingClientRect(),w.P.J&&w.P.J(u.width,u.height),n.P.D&&r(d)}},D=function(a){var b=d.ownerDocument,c=b.defaultView||b.parentWindow;a.preventDefault(),d.classList.add(l.o),c.removeEventListener("mousemove",C,!1),c.removeEventListener("touchmove",C,!1),c.removeEventListener("mouseup",D,!1),c.removeEventListener("touchend",D,!1),d=null},E=function(){for(var a in b)b.hasOwnProperty(a)&&o(b[a].g,!0,!1,!0)},F=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(a,c){var d,e,f=document.createElement("div"),g=null,h=null,i=null,j=null,k=null,n=null,o=null,q={};if("string"==typeof a)d=document.getElementById(a);else{if("object"!=typeof a)return void F();if("string"!=typeof a.innerHTML)return void F();d=a,a=d.id}if(void 0!==b[a])return void console.log("WUI_Dialog id '"+a+"' already created, aborting.");for(e in m)m.hasOwnProperty(e)&&(q[e]=m[e]);if(void 0!==c)for(e in c)c.hasOwnProperty(e)&&void 0!==m[e]&&(q[e]=c[e]);var u=d.firstElementChild;return null===u&&(u=document.createElement("div"),d.appendChild(u)),d.style.width=q.width,d.style.height=q.height,d.classList.add(l.g),u.classList.add(l.content),f.className=l.m,u.style.height=q.q?d.offsetHeight-64+"px":d.offsetHeight-32+"px",n=document.createElement("div"),k=document.createElement("div"),n.style.display="inline-block",k.className="wui-dialog-title",n.innerHTML=q.title,k.appendChild(n),f.appendChild(k),q.draggable&&(d.classList.toggle(l.draggable),f.addEventListener("mousedown",A,!1),f.addEventListener("touchstart",A,!1)),q.s&&(i=document.createElement("div"),i.className=l.h+" "+l.i,i.title="Close",f.appendChild(i)),q.t&&(j=document.createElement("div"),j.className=l.h+" "+l.k,q.j&&s(j,d),f.appendChild(j)),q.v&&(h=document.createElement("div"),h.className=l.h+" "+l.detach,h.title="Detach",f.appendChild(h)),q.q&&(o=document.createElement("div"),o.classList.add(l.q),o.classList.add(l.transition),o.classList.add(l.open),o.innerHTML=q.C,d.appendChild(o)),f.addEventListener("click",w,!1),f.addEventListener("touchstart",w,!1),window.addEventListener("resize",function(){t(!1)},!1),window.addEventListener("beforeunload",E,!1),d.classList.add(l.transition),d.classList.add(l.o),d.insertBefore(f,u),q.u&&(g=document.createElement("div"),g.addEventListener("mousedown",B,!1),g.addEventListener("touchstart",B,!1),g.classList.add("wui-dialog-resize"),g.classList.add(l.transition),g.classList.add(l.open),d.appendChild(g)),b[a]={g:d,T:-1,R:g,S:j,P:q,N:null,O:null,q:o},r(d),p(d),q.open?this.open(a,!1):d.classList.add(l.closed),a},this.U=function(a,c){var d,e,f=b[a];return void 0===f?void("undefined"!=typeof console&&console.log('Cannot setStatusBarContent of WUI dialog "'+a+'".')):void(f.q&&(f.q.innerHTML=c,e=f.N,e&&(e.closed||(d=e.document.body.getElementsByClassName(l.q),d.length>0&&(d[0].innerHTML=c)))))},this.open=function(a,c){var d,e,f,g=b[a];if(void 0===g)return void("undefined"!=typeof console&&console.log('Cannot open WUI dialog "'+a+'".'));if(g.N&&!g.N.closed)return void g.N.focus();if(f=g.g,g.P.p)for(d=q(f),g.g.style.zIndex=16777271,g.O=d,document.body.appendChild(d),e=0;e<k.length;e+=1)d=q(f),k[e].document.body.appendChild(d);return c?void v(f):(f.classList.remove(l.closed),f.classList.add(l.open),void p(f))},this.focus=function(a){var c=b[a];return void 0===c?void("undefined"!=typeof console&&console.log('Cannot focus WUI dialog "'+a+'".')):void p(c.g)},this.close=function(a,c){var d=b[a];return void 0===d?void("undefined"!=typeof console&&console.log('Cannot close WUI dialog "'+a+'".')):void o(d.g,!0,c,!0)},this.V=function(a){var c,d=b[a];return void 0===d?void console.log("Element id '"+a+"' is not a WUI_Dialog, destroying aborted."):(o(d.g,!0,!1,!0),c=d.g,c.parentElement.removeChild(c),void delete b[a])},this.W=function(a){var c=b[a],d=c.N;d&&(d.document.body.firstElementChild?(u(c.g.children[1],d.document.body.firstElementChild),c.P.I&&c.P.I(d)):window.setTimeout(function(){WUI_Dialog.W(a)},500))},this.X=function(a){var c=b[a],d=0;if(void 0===c)return void 0!==a&&console.log("WUI_Dialog.getDetachedDialog: Element id '"+a+"' is not a WUI_Dialog."),null;for(d=0;d<k.length;d+=1)if(k[d]===c.N)return c.N;return null},document.addEventListener("keyup",x,!1)},WUI_DropDown=new function(){"use strict";var a={},b={Y:"wui-dropdown",item:"wui-dropdown-item",content:"wui-dropdown-content",selected:"wui-dropdown-selected",open:"wui-dropdown-open",Z:"wui-dropdown-on"},c={width:"auto",height:24,$:2e3,vertical:!1,_:0,aa:0,ba:null},d=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},e=function(a,c){var d,e=a.createElement("div"),f=null,g="";for(d=0;d<c.ca.length;d+=1)g=c.ca[d],f=a.createElement("div"),c.P.vertical||f.classList.add("wui-dropdown-horizontal"),f.classList.add(b.item),f.innerHTML=g,f.dataset.index=d,e.appendChild(f),f.addEventListener("click",h,!1),g===c.ca[c.aa]&&f.classList.add(b.selected);e.addEventListener("mouseover",i,!1),e.classList.add(b.content),e.dataset.da=c.ea.id,a.body.appendChild(e),c.fa=e},f=function(a,c,d){c.classList.remove(b.Z),d.fa&&d.fa.parentElement===a.body&&a.body.removeChild(d.fa),d.fa=null,d.ga=null},g=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=null,g=null;d.classList.contains(b.Y)&&(e=a[d.id],g=e.fa,g?g.classList.contains(b.open)&&f(c.target.ownerDocument,d,e):i(c))},h=function(c){c.preventDefault(),c.stopPropagation();var d,e,g=c.target,h=null,i=null;if(g.classList.contains(b.item)){for(h=g.parentElement,d=a[h.dataset.da],i=h.getElementsByTagName("div"),e=0;e<i.length;e+=1)i[e].classList.remove(b.selected);g.classList.add(b.selected),d.aa=parseInt(g.dataset.index,10),d.ha.lastElementChild.innerHTML=g.textContent,d.ea!==d.ha&&(d.ea.lastElementChild.innerHTML=g.textContent),void 0!==d.P.ba&&d.P.ba(g.dataset.index),f(g.ownerDocument,d.ha,d)}},i=function(c){c.preventDefault(),c.stopPropagation();var f=c.target,g=null,h=null,i=null,k=f.ownerDocument,l=k.defaultView||k.parentWindow;if(f.classList.contains(b.Y))g=a[f.id],null===g.fa&&(f.classList.add(b.Z),e(k,g),i=g.fa,h=d(f),i.style.top=h.top-i.offsetHeight-g.P._+"px",i.style.left=h.left+"px",i.classList.add(b.open),g.ha=f);else if(f.classList.contains(b.content))g=a[f.dataset.da];else{if(!f.classList.contains(b.item))return;g=a[f.parentElement.dataset.da]}l.clearTimeout(g.ga),f.addEventListener("mouseleave",j,!1)},j=function(c){c.preventDefault();var d=c.target,e=null,g=d.ownerDocument,h=g.defaultView||g.parentWindow;e=d.classList.contains(b.content)?a[d.dataset.da]:d.classList.contains(b.item)?a[d.parentElement.dataset.da]:a[d.id],e.ga=h.setTimeout(f,e.P.$,g,e.ha,e),d.removeEventListener("mouseleave",j,!1)},k=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(d,e,f){var h,j,l={};if("string"==typeof d)h=document.getElementById(d);else{if("object"!=typeof d)return void k();if("string"!=typeof d.innerHTML)return void k();h=d,d=h.id}if(void 0!==a[d])return void console.log("WUI_DropDown id '"+d+"' already created, aborting.");for(j in c)c.hasOwnProperty(j)&&(l[j]=c[j]);if(void 0!==e)for(j in e)e.hasOwnProperty(j)&&void 0!==c[j]&&(l[j]=e[j]);h.classList.add(b.Y),h.style.width=l.width,h.style.height=l.height;var m=document.createElement("div");m.classList.add("wui-dropdown-icon"),h.appendChild(m);var n=document.createElement("div");n.classList.add("wui-dropdown-text"),0!==f.length&&(n.innerHTML=f[l.aa]),h.appendChild(n),h.addEventListener("click",g,!1),h.addEventListener("mouseover",i,!1);var o={ea:h,fa:null,aa:l.aa,ca:f,P:l,ia:n,ja:0,ha:null,ga:null};return a[d]=o,d},this.V=function(b){var c,d=a[b];return void 0===d?void console.log("Element id '"+b+"' is not a WUI_DropDown, destroying aborted."):(c=d.ea,f(document,c,d),c.parentElement.removeChild(c),void delete a[b])}},WUI_RangeSlider=new function(){"use strict";var a={},b=null,c=null,d=null,e=null,f="_wui_container",g="background-color: #00ff00",h=null,i={},j={ka:"MIDI learn"},k={la:"wui-rangeslider-hook",ma:"wui-rangeslider-bar",na:"wui-rangeslider-filler",oa:"wui-rangeslider-hook-focus",pa:"wui-rangeslider-input",ka:"wui-rangeslider-midi-learn-btn"},l={width:148,height:8,title:"",qa:0,ra:0,min:0,max:1,sa:4,step:.01,ta:.01,vertical:!1,ua:!1,va:null,wa:0,value:0,ma:!0,xa:null,ya:null},m={min:0,max:0,step:0,ta:0},n={P:{},za:!1,xa:{},value:0},o=function(a){for(var b,c,d=document.getElementById(a);d;){if(d.classList&&d.classList.contains("wui-dialog")){b=d.id;break}d=d.parentNode}return WUI_Dialog&&(c=WUI_Dialog.X(b))?c.document.getElementById(a):null},p=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},q=function(a,b){null!==a&&a(b)},r=function(a,b){var c=""+a,d=c.indexOf("."),e=d==-1?c.length:1+d+b,f=c.substr(0,e),g=isNaN(f)?0:f;return parseFloat(g)},s=function(a){return a.classList.contains(k.la)?a:a.classList.contains(k.na)?a.firstElementChild:a.firstElementChild.firstElementChild},t=function(b,c,d){var e,f,g,h,i=b,j=a[i.id],l=c.P.width,m=c.P.height,n=Math.abs((d-c.P.min)/c.P.range);e=i.getElementsByClassName(k.ma)[0],f=e.firstElementChild,g=f.firstElementChild,h=e.nextElementSibling,d=r(d,j.P.sa),c.P.vertical?(n=Math.round(n*e.offsetHeight),f.style.position="absolute",f.style.bottom="0",f.style.width="100%",f.style.height=n+"px",g.style.marginTop=-l+"px",g.style.marginLeft=-l/2-1+"px",g.style.width=2*l+"px",g.style.height=2*l+"px",h.style.marginTop="13px",j.ea!==i&&(j.na.style.position="absolute",j.na.style.bottom="0",j.na.style.width="100%",j.na.style.height=n+"px",j.la.style.marginTop=-l+"px",j.la.style.marginLeft=-l/2-1+"px",j.la.style.width=2*l+"px",j.la.style.height=2*l+"px",j.pa.style.marginTop="13px")):(n=Math.round(n*l),f.style.width=n+"px",f.style.height="100%",g.style.left=n+"px",g.style.marginTop=-m/2+"px",g.style.marginLeft=-m+"px",g.style.width=2*m+"px",g.style.height=2*m+"px",j.ea!==i&&(j.na.style.width=n+"px",j.na.style.height="100%",j.la.style.left=n+"px",j.la.style.marginTop=-m/2+"px",j.la.style.marginLeft=-m+"px",j.la.style.width=2*m+"px",j.la.style.height=2*m+"px")),j.pa.value=d,h.value=d,c.value=d},u=function(a){if(a.preventDefault(),null!==d){var f,g,h=d.parentElement,i=h.parentElement,j=i.nextElementSibling,k=p(i),l=i.offsetWidth,m=0,n=a.clientX,o=a.clientY,s=a.changedTouches,t=null;if(s)for(f=0;f<s.length;f+=1)if(t=s[f],t.identifier===e){n=s[f].clientX,o=s[f].clientY;break}if(c.P.vertical?(l=i.offsetHeight,m=Math.round((k.top+i.offsetHeight-o)/c.P.step)*c.P.step):m=Math.round((n-k.left)/c.P.step)*c.P.step,m>l?(m=l,b=c.P.max):m<0?(m=0,b=c.P.min):b=Math.round((c.P.min+m/l*c.P.range)/c.P.step)*c.P.step,c.value===b)return;c.value=b,g=r(b,c.P.sa),j.value=g,c.pa.value=g,c.P.vertical?(h.style.height=m+"px",c.na.style.height=m+"px"):(h.style.width=m+"px",c.na.style.width=m+"px",d.style.left=m+"px",c.la.style.left=m+"px"),q(c.P.va,b)}},v=function(a){if(d){a.preventDefault();var b,f=a.changedTouches,g=null,h=!1,i=d.ownerDocument,j=i.defaultView||i.parentWindow;if(f){for(b=0;b<f.length;b+=1)if(g=f[b],g.identifier===e){h=!0,j.removeEventListener("touchend",v,!1),j.removeEventListener("touchmove",u,!1);break}}else h=!0,j.removeEventListener("mouseup",v,!1),j.removeEventListener("mousemove",u,!1);h&&(d.classList.remove(k.oa),d=null,c=null,i.body.style.cursor="default")}},w=function(b){b.preventDefault(),b.stopPropagation();var f,g,h=null,i=!1,j=b.changedTouches;null===c&&j&&(e=j[0].identifier,i=!0),0===b.button&&(i=!0),i&&(d=s(b.target),d.classList.add(k.oa),h=d.parentElement.parentElement.parentElement,c=a[h.id],f=h.ownerDocument,g=f.defaultView||f.parentWindow,f.body.style.cursor="pointer",u(b),g.addEventListener("mousemove",u,!1),g.addEventListener("touchmove",u,!1),g.addEventListener("mouseup",v,!1),g.addEventListener("touchend",v,!1))},x=function(b){b.preventDefault(),b.stopPropagation();var c=b.target,d=c.parentElement.parentElement.parentElement,e=a[d.id],f=e.P.wa;t(d,e,f),q(e.P.va,f)},y=function(b){b.preventDefault(),b.stopPropagation();var c=s(b.target),d=c.parentElement.parentElement.parentElement,e=a[d.id],f=b.wheelDelta?b.wheelDelta/40:b.detail?-b.detail:0,g=e.value;f>=0?g+=e.P.ta:g-=e.P.ta,g>e.P.max?g=e.P.max:g<e.P.min&&(g=e.P.min),t(d,e,g),q(e.P.va,g)},z=function(b){if(!b.target.validity||b.target.validity.valid){var c=b.target.parentElement.childNodes[1];if(void 0!==c){var d=s(c),e=d.parentElement.parentElement.parentElement,f=a[e.id];t(e,f,b.target.value),q(f.P.va,b.target.value)}}},A=function(a,b,c){return function(a){var d=a.target,e=b.P;d.validity&&!d.validity.valid||("min"===c?(e.min=r(d.value,e.sa),b.pa.min=e.min,e.range=e.max-e.min):"max"===c?(e.max=r(d.value,e.sa),b.pa.max=e.max,e.range=e.max-e.min):"step"===c?(e.step=r(d.value,e.sa),b.pa.step=e.step):"scroll_step"===c&&(e.ta=r(d.value,e.sa)),void 0!==e.ya[c]&&(e.ya[c].Aa=d.value))}},B=function(a){var b,c,d,e,f;if(a)for(b in i)for(c in i[b])for(d=i[b][c],f=0;f<d.Ba.length;f+=1)if(e=d.Ba[f],e===a)return void d.Ba.splice(f,1)},C=function(b){b.preventDefault(),b.stopPropagation();var c,d,e,f,i=b.target,l=i.parentElement,m=a[l.id];if(m.Ca)return m.Ca=!1,i.style="",i.title=j.ka,m.Da.title=j.ka,h=null,m.xa.Ea=null,m.xa.controller=null,void B(l.id);for(d in a)a.hasOwnProperty(d)&&(e=a[d],e.Ca=!1,c=o(d),c&&(f=c.getElementsByClassName(k.ka),f.length>0&&(f[0].style="")),e.Da&&(e.Da.style=""));m.Ca=!0,i.style=g,h=l.id},D=function(b){b.preventDefault(),b.stopPropagation();var c,d,e,g,h,i,j,l,n=b.target,o=n.parentElement,q=a[o.id],r=q.P,s=n.ownerDocument,t=q.ea.id+f,u=1;if(document.getElementById(t)||(q.Fa=!1),q.Fa!==!0){h=s.createElement("div"),h.className="wui-rangeslider-configure-container",l=s.createElement("div"),l.className="wui-rangeslider-configure-close",c=function(a){q.Fa=!1;var b=document.getElementById(t),c=a.target.ownerDocument.getElementById(t);b&&b.parentElement&&b.parentElement.removeChild(b),c&&c.parentElement&&c.parentElement.removeChild(c)},l.addEventListener("click",c,!1),l.addEventListener("touchstart",c,!1),h.id=t,h.appendChild(l);for(e in r.ya)r.ya.hasOwnProperty(e)&&void 0!==m[e]&&(g=r.ya[e],i=s.createElement("div"),i.style.display="inline-block",i.style.marginRight="8px",i.style.width="80px",i.style.textAlign="right",i.innerHTML=e.replace("_"," ")+" : ",j=s.createElement("input"),j.className=k.pa,h.appendChild(i),h.appendChild(j),u%2===0&&h.appendChild(s.createElement("div")),j.setAttribute("type","number"),void 0!==g&&(void 0!==g.min&&(j.setAttribute("min",g.min),j.title=j.title+" min: "+g.min),void 0!==g.max&&(j.setAttribute("max",g.max),j.title=j.title+" max: "+g.max),void 0!==g.Aa?j.setAttribute("value",g.Aa):"min"===e?j.setAttribute("value",r.min):"max"===e?j.setAttribute("value",r.max):"step"===e?j.setAttribute("value",r.step):"scroll_step"===e&&j.setAttribute("value",r.ta)),j.addEventListener("input",A(b,q,e),!1),u+=1);d=p(n),o.insertBefore(h,n),q.Fa=!0}},E=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(b,c){var d,e,f={};if("string"==typeof b)d=document.getElementById(b);else{if("object"!=typeof b)return void E();if("string"!=typeof b.innerHTML)return void E();d=b,b=d.id}if(void 0!==a[b])return void console.log("WUI_RangeSlider id '"+b+"' already created, aborting.");for(e in l)l.hasOwnProperty(e)&&(f[e]=l[e]);if(void 0!==c){for(e in c)c.hasOwnProperty(e)&&void 0!==l[e]&&(f[e]=c[e]);void 0!==c.max&&(f.range=c.max),void 0!==c.step&&(f.step=c.step,void 0===c.ta&&(f.ta=f.step)),void 0!==c.ua?f.ua=c.ua:f.vertical&&(f.ua=!0),void 0!==c.wa?f.wa=c.wa:void 0!==c.min&&void 0!==c.max&&(f.wa=f.min+f.max/2)}f.min<0&&(f.range=f.max-f.min),a[b]=null,d.classList.add("wui-rangeslider"),f.ua&&d.classList.add("wui-rangeslider-title-ontop");var g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("div"),p=document.createElement("input"),q={ea:d,P:f,ma:null,na:null,la:null,za:!1,xa:{Ea:null,controller:null,Ga:"abs"},Ca:!1,Da:null,pa:p,wa:f.wa,value:f.value};if(g.innerHTML=f.title,p.setAttribute("value",f.value),p.setAttribute("type","number"),p.setAttribute("step",f.step),p.classList.add(k.pa),o.classList.add("wui-rangeslider-value"),g.classList.add("wui-rangeslider-title"),h.classList.add(k.ma),i.classList.add(k.na),n.classList.add(k.la),f.vertical&&(g.style.textAlign="center"),g.style.minWidth=f.qa+"px",o.style.minWidth=f.ra+"px",p.style.minWidth=f.ra+"px",h.style.width=f.width+"px",h.style.height=f.height+"px",d.appendChild(g),f.ma?(p.setAttribute("min",f.min),p.setAttribute("max",f.max)):(h.style.display="none",p.style.marginTop="6px",c.max&&p.setAttribute("min",f.min),c.min&&p.setAttribute("max",f.max)),h.appendChild(i),i.appendChild(n),d.appendChild(h),q.ma=h,q.na=i,q.la=n,d.appendChild(p),c.max||c.min||(q.za=!0),f.ya){var r=0;for(e in f.ya)f.ya.hasOwnProperty(e)&&void 0!==m[e]&&(r+=1);if(r>0){var s=document.createElement("div");s.classList.add("wui-rangeslider-configurable-btn"),s.addEventListener("click",D,!1),s.addEventListener("touchstart",D,!1),f.ua&&!f.vertical?(s.style.bottom="0",g.style.marginBottom="4px"):f.ua&&f.vertical?(g.style.marginLeft="16px",g.style.marginRight="16px",s.style.top="0"):(g.style.marginLeft="16px",s.style.top="0"),f.vertical?d.appendChild(s):d.insertBefore(s,g)}}if(f.xa)if(navigator.Ha){var u=document.createElement("div");u.classList.add(k.ka),u.title=j.ka,u.addEventListener("click",C,!1),u.addEventListener("touchstart",C,!1),q.Da=u,f.xa.type&&(q.xa.Ga=f.xa.type),d.appendChild(u)}else console.log("WUI_RangeSlider id '"+b+"' : Web MIDI API is disabled. (not supported by your browser?)");return f.ma&&(h.addEventListener("mousedown",w,!1),h.addEventListener("touchstart",w,!1),n.addEventListener("dblclick",x,!1),h.addEventListener("mousewheel",y,!1),h.addEventListener("DOMMouseScroll",y,!1)),p.addEventListener("input",z,!1),a[b]=q,t(d,q,f.value),b},this.V=function(b){var c,d,e,g=a[b];return void 0===g?void console.log("Element id '"+b+"' is not a WUI_RangeSlider, destroying aborted."):(h===b&&(midi_learn_current=null),B(b),c=g.ea,c.parentElement.removeChild(c),d=c.ownerDocument,e=d.getElementById(b+f),e&&d.removeChild(e),void delete a[b])},this.Ia=function(b){var c,d=a[b],e={};if(void 0===d)return void console.log("Element id '"+b+"' is not a WUI_RangeSlider, getParameters aborted.");for(c in d)d.hasOwnProperty(c)&&void 0!==n[c]&&(e[c]=d[c]);return e},this.Ja=function(b,c){var d,e=a[b];if(void 0===e)return void console.log("Element id '"+b+"' is not a WUI_RangeSlider, setParameters aborted.");for(d in e)e.hasOwnProperty(d)&&void 0!==c[d]&&(e[d]=c[d]);e.xa.Ea&&e.xa.controller&&i["d"+e.xa.Ea]["c"+e.xa.controller].Ba.push(b),t(e.ea,e,e.value)},this.Ka=function(b){var c,d,e,f,g,j,l=h,m=b.data[0],n=b.data[1],p=parseInt(b.data[2],10),r="d"+m,s="c"+n,u=0;if(h)return c=a[l],i[r]||(i[r]={}),i[r][s]||(i[r][s]={La:p,Ba:[],Ma:1}),i[r][s].Ba.push(l),g=o(l),g&&(e=g.getElementsByClassName(k.ka),e.length>0&&(e[0].style="",e[0].title=r+" "+s)),c.xa.Ea=m,c.xa.controller=n,c.Ca=!1,c.Da.style="",c.Da.title=r+" "+s,void(h=null);if(i[r]&&i[r][s])for(d=i[r][s],u=0;u<d.Ba.length;u+=1)if(l=d.Ba[u],c=a[l],g=o(l),f=g?g:c.ea,"abs"===c.xa.Ga)j=c.P.min+c.P.range*(p/127),t(f,c,j),q(c.P.va,j);else if("rel"===c.xa.Ga){if(d.La>p){if(d.Ma=-c.P.step,j=c.value-c.P.step,j<c.P.min&&!c.za)continue;d.La=p}else if(d.La<p){if(d.Ma=c.P.step,j=c.value+c.P.step,j>c.P.max&&!c.za)continue;d.La=p}else if(j=c.value+d.Ma,!c.za){if(j>c.P.max)continue;if(j<c.P.min)continue}t(f,c,j),q(c.P.va,j)}}},WUI_Input=WUI_RangeSlider,WUI_Tabs=new function(){"use strict";var a={},b={enabled:"wui-tab-enabled",disabled:"wui-tab-disabled",Na:"wui-tab-display-none",Oa:"wui-tabs",Pa:"wui-tab",Qa:"wui-tabs-content",Ra:"wui-tab-content",Sa:"wui-tabs-underline"},c={Ta:null,height:"calc(100% - 30px)"},d=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=d.parentElement,f=e.nextElementSibling.nextElementSibling,g=e.parentElement.id,h=a[g],i=0,j=null,k=0;for(k=0;k<e.childElementCount;k+=1)j=e.children[k],j.classList.remove(b.enabled),j.classList.add(b.disabled),h.Oa[k].classList.remove(b.enabled),h.Oa[k].classList.add(b.disabled),j===d&&(i=k);for(k=0;k<f.childElementCount;k+=1)j=f.children[k],j.classList.remove(b.Na),h.Ua[k].classList.remove(b.Na),i!==k&&(j.classList.add(b.Na),h.Ua[k].classList.add(b.Na));h.Oa[i].classList.remove(b.disabled),h.Oa[i].classList.add(b.enabled),c.target.classList.remove(b.disabled),c.target.classList.add(b.enabled),h.P.Ta&&h.P.Ta(i)},e=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(f,g){var h,i,j,k,l,m=document.createElement("div"),n={},o=0;if("string"==typeof f)h=document.getElementById(f);else{if("object"!=typeof f)return void e();if("string"!=typeof f.innerHTML)return void e();h=f,f=h.id}if(i=h.firstElementChild,j=i.nextElementSibling,k=i.children[0],void 0!==a[f])return void console.log("WUI_Tabs id '"+f+"' already created, aborting.");for(l in c)c.hasOwnProperty(l)&&(n[l]=c[l]);if(void 0!==g)for(l in g)g.hasOwnProperty(l)&&void 0!==c[l]&&(n[l]=g[l]);h.style.overflow="hidden",m.className="wui-tabs-underline",h.insertBefore(m,j),i.classList.add(b.Oa);var p=i.childElementCount,q=[];for(o=0;o<p;o+=1){var r=i.children[o];r.classList.add("wui-tab"),r!==k&&r.classList.add(b.disabled),r.addEventListener("click",d,!1),r.addEventListener("touchstart",d,!1),q.push(r)}k.classList.add(b.enabled),k.classList.add("wui-first-tab"),j.classList.add("wui-tabs-content");var s=j.childElementCount,t=[j.children[0]];for(j.style.height=n.height,j.children[0].classList.add(b.Ra),o=1;o<s;o+=1){var u=j.children[o];u.classList.add(b.Ra),u.classList.add(b.Na),t.push(u)}return a[f]={ea:h,Oa:q,Ua:t,P:n},f},this.Va=function(a,b){var c=document.getElementById(a),d=c.firstElementChild.nextElementSibling.nextElementSibling;return d.children[b]},this.Wa=function(a,b){var c=this.Va(a,b);return c.getAttribute("data-group-name")},this.V=function(c){var d,e,f,g,h,i=a[c];if(void 0===i)return void console.log("Element id '"+c+"' is not a WUI_Tabs, destroying aborted.");if(d=i.ea,d.classList.contains("wui-dialog-content"))for(e=d.getElementsByClassName(b.Oa),f=d.getElementsByClassName(b.Sa),g=d.getElementsByClassName(b.Qa),h=0;h<e.length;h+=1)d.removeChild(e[h]),d.removeChild(f[h]),d.removeChild(g[h]);else d.parentElement.removeChild(d);delete a[c]}},WUI_ToolBar=new function(){"use strict";var a={},b={Xa:"wui-toolbar-minimize-icon",Ya:"wui-toolbar-maximize-icon",button:"wui-toolbar-button",Za:"wui-toolbar-minimize-group",$a:"wui-toolbar-minimize-group-vertical",toggle:"wui-toolbar-toggle",_a:"wui-toolbar-toggle-on",item:"wui-toolbar-item",group:"wui-toolbar-group",ab:"wui-toolbar-group-vertical",bb:"wui-toolbar",cb:"wui-toolbar-dropdown-content",eb:"wui-toolbar-dropdown-item",fb:"wui-toolbar-dropdown-open"},c={gb:null,hb:null,ib:32,jb:32,kb:32,lb:32,mb:!1,vertical:!1},d=function(b){var c=a[b];return void 0===c?("undefined"!=typeof console&&console.log('_getWidget failed, the element id "'+b+'" is not a WUI_ToolBar.'),null):c},e=function(a){var b=a.ownerDocument,c=a.getBoundingClientRect(),d=b.body,e=b.documentElement,f=b.defaultView||b.parentWindow,g=f.pageYOffset||e.scrollTop||d.scrollTop,h=f.pageXOffset||e.scrollLeft||d.scrollLeft,i=e.clientTop||d.clientTop||0,j=e.clientLeft||d.clientLeft||0,k=c.top+g-i,l=c.left+h-j;return{top:Math.round(k),left:Math.round(l)}},f=function(c,d){return void 0!==d?a[d]:c.classList.contains(b.bb)?a[c.id]:c.classList.contains(b.Xa)||c.classList.contains(b.Ya)||c.classList.contains(b.ab)||c.classList.contains(b.group)?a[c.parentElement.id]:a[c.parentElement.parentElement.id]},g=function(a,b,c){if(void 0!==a.nb&&null!==a.nb){var d={id:a.id,type:b};void 0!==c&&(d.state=c),a.nb(d)}},h=function(a,c,d){var e,f=a.createElement("div");if(void 0!==c.ob)for(e=0;e<c.ob.length;e+=1){var g=c.ob[e],h=a.createElement("div");c.vertical||h.classList.add("wui-toolbar-dropdown-horizontal"),h.classList.add(b.eb),h.innerHTML=g.title,h.dataset.index=e,f.appendChild(h)}return f.addEventListener("click",j,!1),f.style.width=d.pb+"px",f.classList.add(b.cb),f.dataset.qb=d.ea.id,f.dataset.rb=c.id,a.body.appendChild(f),f},i=function(a,c,d){var e,h,i,j=null,k=!1,l=0;j=f(a,c),h=j.ea,a.parentElement&&a.parentElement.parentElement&&(h=a.parentElement.parentElement);var m=j.sb[parseInt(a.dataset.tb,10)];if("1"===m.ea.dataset.Z?(m.ea.dataset.Z=0,a.dataset.Z=0,m.ea.title=m.ub,a.title=m.ub,void 0!==m.icon&&(m.ea.classList.add(m.icon),m.ea.classList.remove(m.vb),a.classList.add(m.icon),a.classList.remove(m.vb))):(m.ea.dataset.Z=1,a.dataset.Z=1,void 0!==m.wb&&(m.ea.title=m.wb,a.title=m.wb),void 0!==m.vb&&(m.ea.classList.add(m.vb),m.ea.classList.remove(m.icon),a.classList.add(m.vb),a.classList.remove(m.icon)),k=!0),"none"!==m.xb&&(a.classList.contains(b._a)?(m.ea.classList.remove(b._a),a.classList.remove(b._a)):(m.ea.classList.add(b._a),a.classList.add(b._a))),e=a.dataset.yb,void 0!==e)for(i=h.getElementsByClassName(b.item),l=0;l<i.length;l+=1){var n=i[l],o=j.sb[parseInt(n.dataset.tb,10)];if(e===n.dataset.yb&&n.dataset.tb!==a.dataset.tb){if("0"===n.dataset.Z)continue;n.dataset.Z="0",o.ea.dataset.Z="0",n.classList.remove(b._a),o.ea.classList.remove(b._a),void 0!==m.vb&&(n.classList.remove(o.vb),o.ea.classList.remove(o.vb)),void 0!==m.icon&&(n.classList.add(o.icon),o.ea.classList.add(o.icon)),(d||void 0===d)&&g(o,"toggle",!1)}}d!==!0&&void 0!==d||g(m,"toggle",k)},j=function(c){c.preventDefault(),c.stopPropagation();var d=c.target,e=d.ownerDocument,f=d.parentElement,g=a[f.dataset.qb],h=parseInt(f.dataset.rb,10),i=g.sb[h],j=parseInt(d.dataset.index,10),l=i.ob[j],m=e.getElementById(f.dataset.qb),n=m.getElementsByClassName(b.item),o=n[h];void 0!==l.nb&&(l.nb(),o.classList.remove(b._a),i.ea.classList.remove(b._a),k(i,o))},k=function(a,c){var d,e,f=c.ownerDocument,g=f.body.getElementsByClassName(b.cb);for(e=0;e<g.length;e+=1)d=g[e],d.removeEventListener("click",j,!1),d.parentElement.removeChild(d);a.ea.classList.remove(b._a),c.classList.remove(b._a)},l=function(a,b){var c=function(){var d=b.ownerDocument,e=d.defaultView||d.parentWindow;k(a,b),e.removeEventListener("click",c)};return c},m=function(a){a.preventDefault(),a.stopPropagation();var c=a.target;if(c.classList.contains(b.Za)||c.classList.contains(b.$a))return void n(c);if(c.classList.contains(b.toggle))return void i(c);if(!(c.classList.contains(b.bb)||c.classList.contains(b.group)||c.classList.contains(b.ab))){var d=null,j=null,m=null,o=null,p=c.ownerDocument,q=p.defaultView||p.parentWindow;if(o=f(c),d=o.sb[c.dataset.tb],"dropdown"===d.type){if(c.classList.contains(b._a))return void k(d,c);j=h(p,d,o);var r=d.ea;c.classList.add(b._a),r.classList.add(b._a),m=e(c),"tb_item"===d.pb&&(j.style.width=c.offsetWidth+"px"),"s"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+"px"):"sw"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"nw"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left-j.offsetWidth+"px"):"se"===d.orientation?(j.style.top=m.top+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):"ne"===d.orientation?(j.style.top=m.top-j.offsetHeight+c.offsetHeight+"px",j.style.left=m.left+c.offsetWidth+"px"):(j.style.top=m.top-j.offsetHeight+"px",j.style.left=m.left+"px"),j.classList.add(b.fb),a.stopPropagation&&a.stopPropagation(),q.addEventListener("click",l(d,c),!1)}else g(d,"click")}},n=function(a){var c=a.nextSibling;a.classList.contains(b.Xa)?(a.classList.add(b.Ya),a.classList.remove(b.Xa),a.title="Maximize group",c.style.display="none"):(a.classList.add(b.Xa),a.classList.remove(b.Ya),a.title="Minimize group",c.style.display="")},o=function(){console.log("WUI_RangeSlider 'create' failed, first argument not an id nor a DOM element.")};this.create=function(d,e,f){var g,h,j=null,k=null,l=null,n=null,p={};if("string"==typeof d)g=document.getElementById(d);else{if("object"!=typeof d)return void o();if("string"!=typeof d.innerHTML)return void o();g=d,d=g.id}if(void 0!==a[d])return void console.log("WUI_Toolbar id '"+d+"' already created, aborting.");for(h in c)c.hasOwnProperty(h)&&(p[h]=c[h]);if(void 0!==e)for(h in e)e.hasOwnProperty(h)&&void 0!==c[h]&&(p[h]=e[h]);a[d]={ea:g,sb:[],P:p},g.classList.add(b.bb);var q=b.group,r=b.item,s="wui-toolbar-spacer",t=b.Za;p.vertical?(g.classList.add("wui-toolbar-vertical"),q=b.ab,r+=" wui-toolbar-item-vertical",s="wui-toolbar-spacer-vertical",t=b.$a,g.style.maxWidth=p.ib+4+"px",null===p.gb&&(p.gb=3),null===p.hb&&(p.hb=8)):(g.style.maxHeight=p.jb+4+"px",null===p.gb&&(p.gb=3),null===p.hb&&(p.hb=0)),t=b.button+" "+b.Xa+" "+t,g.addEventListener("click",m,!1);var u;for(l in f)if(f.hasOwnProperty(l)){null!==n&&(k=document.createElement("div"),k.className=s,g.appendChild(k)),p.mb&&(k=document.createElement("div"),k.className=t,k.title="Minimize group",g.appendChild(k)),j=f[l];var v=document.createElement("div");for(v.className=q,p.vertical?v.style.maxWidth=p.ib+"px":v.style.maxHeight=p.jb+"px",u=0;u<j.length;u+=1){var w,x=j[u],y=document.createElement("div"),z=a[d].sb.length,A={ea:y,nb:x.nb,icon:x.icon,ob:[],ub:"",type:x.type,pb:x.zb,orientation:x.orientation,id:z};if(y.className=r,y.style.minWidth=p.ib+"px",y.style.minHeight=p.jb+"px",y.style.marginLeft=p.gb+"px",y.style.marginRight=p.gb+"px",y.style.marginTop=p.hb+"px",y.style.marginBottom=p.hb+"px",y.style.backgroundSize=p.kb-4+"px "+(p.lb-4)+"px",v.appendChild(y),a[d].sb.push(A),y.dataset.tb=z,A.ub=x.ub,void 0!==x.ub&&(y.title=x.ub),void 0!==x.text&&(y.innerHTML=x.text,y.style.lineHeight=p.jb+"px",y.classList.add("wui-toolbar-text"),void 0!==x.icon&&(y.style.paddingLeft=p.kb+2+"px",y.style.backgroundPosition="left center")),void 0!==x.icon&&y.classList.add(x.icon),"toggle"===x.type)y.classList.add(b.toggle),A.vb=x.vb,A.wb=x.wb,A.xb=x.xb,void 0!==x.yb&&(y.dataset.yb=x.yb),x.Ab&&(y.dataset.Z="1");else if("dropdown"===x.type){if(y.classList.add(b.button),void 0!==x.ob)for(w=0;w<x.ob.length;w+=1){var B=x.ob[w];A.ob.push({title:B.title,nb:B.nb})}}else y.classList.add(b.button)}g.appendChild(v),n=j}var C=g.getElementsByClassName(b.item);for(u=0;u<C.length;u+=1){var D=C[u];"1"===D.dataset.Z&&(D.dataset.Z="0",i(D,d,!0))}return d},this.Bb=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.ea.getElementsByClassName(h.P.vertical?b.ab:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.Za)||g.classList.contains(b.$a))&&(g.style.display="none"),f.style.display="none"}},this.Cb=function(a,c){var e,f,g,h=d(a);if(h){if(e=h.ea.getElementsByClassName(h.P.vertical?b.ab:b.group),0===e.length)return;f=e[c],g=f.previousElementSibling,(g.classList.contains(b.Za)||g.classList.contains(b.$a))&&(g.style.display=""),e[c].style.display=""}},this.toggle=function(a,b,c){var e=d(a);e&&i(e.sb[b].ea,a,c)},this.Db=function(a,b){var c=d(a);if(c)return c.sb[b].ea},this.V=function(b){var c,d,e,f,g,h,i,j=a[b];if(void 0===j)return void console.log("Element id '"+b+"' is not a WUI_ToolBar, destroying aborted.");for(c=j.toolbar,d=j.sb,c.parentElement.removeChild(c),i=0;i<d.length;i+=1)e=d[i],"dropdown"===e.type&&(f=e.ob,f.length>0&&(g=f[0],h=g.ea,h.parentElement.removeChild(h)));delete a[b]}},WUI_CircularMenu=new function(){"use strict";var a=[],b=0,c={item:"wui-circularmenu-item",show:"wui-circularmenu-show"},d={x:null,y:null,rx:64,ry:48,angle:0,ib:32,jb:32,window:null,ea:null},e=function(b){var c,d;for(d=0;d<a.length;d+=1)c=a[d],b.body.removeChild(c);a=[]},f=function(a,b,c){var d=function(a){a.preventDefault(),c(),e(b)};return d},g=function(a,d){var f=function(g){g.preventDefault();var h=(new Date).getTime();h-b<=500||g.target.classList.contains(c.item)||(e(d),a.removeEventListener("click",f),a.removeEventListener("mousedown",f))};return f},h=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j),width:b.width,height:b.height}},i=function(a){return a*(Math.PI/180)},j=function(d,h,j,k,l,m){e(k);var n,o,p,q,r=-(Math.PI/2)+i(d.angle),s=h.length,t=2*Math.PI/s;for(p=0;p<s;p+=1)o=h[p],n=document.createElement("div"),n.classList.add(c.item),n.style.width=d.ib+"px",n.style.height=d.jb+"px",n.style.backgroundSize=d.ib-4+"px "+(d.jb-4)+"px",n.style.left=l+d.rx*Math.cos(r)+"px",n.style.top=m+d.ry*Math.sin(r)+"px",n.classList.add(o.icon),o.ub&&(n.title=o.ub),k.body.appendChild(n),j.getComputedStyle(n).width,a.push(n),o.nb&&n.addEventListener("click",f(j,k,o.nb)),n.classList.add(c.show),r+=t;q=g(j,k),j.addEventListener("click",q),b=(new Date).getTime(),j.addEventListener("mousedown",q)};this.create=function(a,b){var c,e,f,g,i,k={},l=document,m=window;for(c in d)d.hasOwnProperty(c)&&(k[c]=d[c]);if(void 0!==a)for(c in a)a.hasOwnProperty(c)&&void 0!==d[c]&&(k[c]=a[c]);g=k.ea,null!==g?(i=h(g),l=g.ownerDocument,m=l.defaultView||l.parentWindow,e=i.left+(i.width-k.ib)/2,f=i.top+(i.height-k.jb)/2,j(k,b,m,l,e,f)):null!==e&&null!==f&&(null!==k.window&&(m=k.window,l=m.document),e=k.x-k.ib/2,f=k.y-k.jb/2,j(k,b,m,l,e,f))}},WUI=new function(){"use strict";var a={Na:"wui-display-none",Eb:"wui-hide-fi-500",Fb:"wui-show-fi-500",draggable:"wui-draggable"},b=[],c=null,d=null,e=0,f=0,g=function(b,c,d){var e=function(){d&&b.classList.add(a.Na),c&&c(),b.removeEventListener("transitionend",e)};return e},h=function(g){g.preventDefault();var h,k=g.clientX,l=g.clientY,m=g.changedTouches;if(g.target.classList.contains(a.draggable)){if(null===c)if(m)d=m[0].identifier,k=m[0].clientX,l=m[0].clientY;else if(0!==g.button)return;c=g.target,document.body.style.cursor="move",h=b[parseInt(c.dataset.Gb,10)],h.Hb?(e=k-parseInt(h.x,10),f=l-parseInt(h.y,10)):(e=k-parseInt(c.style.left,10),f=l-parseInt(c.style.top,10)),window.addEventListener("mousemove",i,!1),window.addEventListener("touchmove",i,!1),window.addEventListener("mouseup",j,!1),window.addEventListener("touchend",j,!1)}},i=function(a){a.preventDefault();var g,h=a.clientX,i=a.clientY,j=a.changedTouches,k=null,l=b[parseInt(c.dataset.Gb,10)],m=l.x,n=l.y;if(j)for(g=0;g<j.length;g+=1)if(k=j[g],k.identifier===d){h=j[g].clientX,i=j[g].clientY;break}0!==l.Ib&&(m=h-e,l.Hb||(c.style.left=m+"px"),l.x=m),1!==l.Ib&&(n=i-f,l.Hb||(c.style.top=n+"px"),l.y=n),l&&void 0!==l.Jb&&l.Jb(c,m,n)},j=function(a){a.preventDefault();var e,f=a.changedTouches,g=null;if(0!==b.length)if(f){for(e=0;e<f.length;e+=1)if(g=f[e],g.identifier===d){c=null,document.body.style.cursor="default",window.removeEventListener("touchmove",i,!1),window.removeEventListener("touchend",j,!1);break}}else c=null,document.body.style.cursor="default",window.removeEventListener("mousemove",i,!1),window.removeEventListener("mouseup",j,!1)};this.Kb=function(b,c,d,e){void 0!==c&&null!==c||(c=500),void 0===b.style.Lb?b.style.transition="visibility 0s ease-in-out "+c+"ms, opacity "+c+"ms ease-in-out":b.style.Lb="visibility 0s ease-in-out "+c+"ms, opacity "+c+"ms ease-in-out",b.addEventListener("transitionend",g(b,d,e),!1),b.classList.add(a.Eb),b.classList.remove(a.Fb)},this.Mb=function(b,c){void 0!==c&&null!==c||(c=500),void 0===b.style.Lb?b.style.transition="visibility 0s ease-in-out 0s, opacity "+c+"ms ease-in-out":b.style.Lb="visibility 0s ease-in-out 0s, opacity "+c+"ms ease-in-out",b.classList.remove(a.Eb),b.classList.add(a.Fb),b.classList.remove(a.Na)},this.draggable=function(c,d,e){c.classList.contains(a.draggable)||(c.classList.add(a.draggable),c.addEventListener("mousedown",h,!1),c.addEventListener("touchstart",h,!1),c.dataset.Gb=b.length,b.push({Jb:d,ea:c,Ib:null,Hb:e,x:parseInt(c.style.left,10),y:parseInt(c.style.top,10)}))},this.Nb=function(c){if(c.classList.contains(a.draggable)){c.classList.remove(a.draggable),c.removeEventListener("mousedown",h,!1),c.removeEventListener("touchstart",h,!1);var d,e=parseInt(c.dataset.Gb,10);for(b.splice(e,1),d=0;d<b.length;d+=1){var f=b[d];f.ea.dataset.Gb=d}}},this.Ob=function(c,d){if(c.classList.contains(a.draggable)){var e=b[parseInt(c.dataset.Gb,10)];e.Ib="x"===d?0:"y"===d?1:null}}};